{"version":3,"sources":["webpack://inspection-scheduler/./node_modules/@arcgis/core/layers/support/ExportWMSImageParameters.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/layers/support/wmsUtils.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/layers/WMSLayerView.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js"],"names":["o","visible","n","p","c","super","arguments","this","_layerHandles","extent","_scale","view","e","_get","_set","removeAll","add","sublayers","on","notifyChange","propertyName","visibleSublayers","filter","name","map","join","scale","layer","s","t","r","a","minScale","maxScale","l","i","forEach","unshift","spatialReferences","spatialReference","wkid","indexOf","latestWkid","some","push","length","layers","imageFormat","imageTransparency","version","xmin","ymin","xmax","y","ymax","u","m","bbox","format","request","service","styles","transparent","isNaN","crs","srs","prototype","readOnly","dependsOn","type","Number","autoTracked","84","83","27","idCounter","DOMParser","parseFromString","documentElement","nodeName","Array","slice","call","childNodes","textContent","getAttribute","f","d","N","b","parseInt","A","x","E","h","I","g","L","M","O","w","F","v","fullExtents","toJSON","C","T","queryable","R","V","_","U","dimensions","q","reduce","concat","B","S","D","POSITIVE_INFINITY","NEGATIVE_INFINITY","isArray","Date","Math","min","getTime","max","startTimeField","endTimeField","trackIdField","timeExtent","copyright","description","featureInfoFormat","featureInfoUrl","mapUrl","maxWidth","maxHeight","supportedImageFormatTypes","timeInfo","title","popupEnabled","parseFloat","MAX_VALUE","substring","query","hasOwnProperty","toLowerCase","path","id","parentLayerId","split","legendURL","test","units","default","multipleValues","nearestValue","current","unitSymbol","nodeType","Node","ELEMENT_NODE","resolution","match","years","months","days","hours","minutes","seconds","replace","toISOString","createFetchPopupFeaturesQuery","width","height","fetchFeatureInfo","then","supportsSpatialReference","addResolvingPromise","strategy","update","catch","error","imageMaxHeight","imageMaxWidth","_bitmapContainer","container","addChild","fetchSource","fetchImage","bind","requestUpdate","imageRotationSupported","imageNormalizationSupported","hidpi","_exportWMSImageParameters","handles","watch","_exportImageVersion","remove","destroy","removeChild","removeAllChildren","children","round","updating","updateRequested","timestamp","refreshTimestamp"],"mappings":"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","file":"chunks/8650.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import r from\"../../core/Accessor.js\";import a from\"../../core/Handles.js\";import{combinedViewLayerTimeExtentProperty as l}from\"./commonProperties.js\";import{coordsReversed as i}from\"./wmsUtils.js\";const o={visible:\"visibleSublayers\"},n=[102100,3857,102113,900913],p=[3395,54004];let c=class extends r{constructor(){super(...arguments),this._layerHandles=new a,this.extent=null,this._scale=null,this.view=null}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this._layerHandles&&(this._layerHandles.removeAll(),this._layerHandles=null),e&&(this._layerHandles||(this._layerHandles=new a),this._layerHandles.add([e.sublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"wms-sublayer-update\",(e=>this.notifyChange(o[e.propertyName])))])))}get layers(){const{visibleSublayers:e}=this;return e.filter((e=>e.name)).map((e=>e.name)).join(\",\")}get scale(){return null!=this._scale?this._scale:this.view&&this.view.scale||0}set scale(e){this.view||(this._scale=e,this.notifyChange(\"scale\"))}get version(){return(this._get(\"version\")||0)+1}get visibleSublayers(){const{layer:e,scale:s}=this,{sublayers:t}=e,r=[],a=e=>{const{minScale:t,maxScale:l,sublayers:i,visible:o}=e;o&&(0===s||(0===t||s<=t)&&(0===l||s>=l))&&(i?i.forEach(a):r.unshift(e))};return null==t||t.forEach(a),r}get wkid(){const{extent:e,layer:s}=this,t=s.spatialReferences;let r=e.spatialReference&&e.spatialReference.wkid;t&&-1===t.indexOf(r)&&e.spatialReference.latestWkid&&(r=e.spatialReference.latestWkid);const a=n.some((e=>e===r));if(!t)return r;if(a){const e=[];t.forEach((s=>{n.indexOf(s)>-1&&e.push(s)})),e.length||t.forEach((s=>{p.indexOf(s)>-1&&e.push(s)})),r=e.length>0?e[0]:n[0]}return r}toJSON(){const{extent:e,layer:s,layers:t}=this,{imageFormat:r,imageTransparency:a,spatialReferences:l,version:o}=s;let{wkid:n}=this;l&&-1===l.indexOf(n)&&e.spatialReference.latestWkid&&(n=e.spatialReference.latestWkid);const{xmin:p,ymin:c,xmax:y,ymax:u}=e,m={bbox:\"1.3.0\"===s.version&&i(n)?`${c},${p},${u},${y}`:`${p},${c},${y},${u}`,format:r,request:\"GetMap\",service:\"WMS\",styles:\"\",transparent:a,version:o};return isNaN(n)||(\"1.3.0\"===o?m.crs=\"EPSG:\"+n:m.srs=\"EPSG:\"+n),{...m,layers:t}}};e([s()],c.prototype,\"extent\",void 0),e([s()],c.prototype,\"layer\",null),e([s({readOnly:!0,dependsOn:[\"visibleSublayers\"]})],c.prototype,\"layers\",null),e([s({type:Number,dependsOn:[\"view.scale\"]})],c.prototype,\"scale\",null),e([s(l)],c.prototype,\"timeExtent\",void 0),e([s({type:Number,dependsOn:[\"layers\",\"layer.imageTransparency\",\"timeExtent\"],readOnly:!0})],c.prototype,\"version\",null),e([s()],c.prototype,\"view\",void 0),e([s({readOnly:!0,dependsOn:[\"layer.sublayers\",\"scale\"]})],c.prototype,\"visibleSublayers\",null),e([s({dependsOn:[],autoTracked:!1})],c.prototype,\"wkid\",null),c=e([t(\"esri.layers.support.ExportWMSImageParameters\")],c);var y=c;export default y;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{urlToObject as t}from\"../../core/urlUtils.js\";import n from\"../../geometry/SpatialReference.js\";import r from\"../../geometry/Extent.js\";const i=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],a={84:4326,83:4269,27:4267};function s(t){if(!t)return null;const n={idCounter:-1};if(\"string\"==typeof t){t=(new DOMParser).parseFromString(t,\"text/xml\")}const i=t.documentElement;if(\"ServiceExceptionReport\"===i.nodeName){const t=Array.prototype.slice.call(i.childNodes).map((e=>e.textContent)).join(\"\\r\\n\");throw new e(\"wmslayer:wms-capabilities-xml-is-not-valid\",\"The server returned errors when the WMS capabilities were requested.\",t)}const a=m(\"Capability\",i),s=m(\"Service\",i),o=m(\"Request\",a);if(!a||!s||!o)return null;const l=m(\"Layer\",a);if(!l)return null;const c=\"WMS_Capabilities\"===i.nodeName||\"WMT_MS_Capabilities\"===i.nodeName?i.getAttribute(\"version\"):\"1.3.0\",f=d(\"Title\",s,\"\")||d(\"Name\",s,\"\"),p=d(\"AccessConstraints\",s,\"\"),N=d(\"Abstract\",s,\"\"),b=parseInt(d(\"MaxWidth\",s,\"5000\"),10),y=parseInt(d(\"MaxHeight\",s,\"5000\"),10),A=x(o,\"GetMap\"),E=h(o,\"GetMap\"),I=g(l,c,n);let L,F=0;if(Array.prototype.slice.call(a.childNodes).forEach((e=>{\"Layer\"===e.nodeName&&(0===F?L=e:1===F?(I.name&&(I.name=\"\",I.sublayers.push(g(L,c,n))),I.sublayers.push(g(e,c,n))):I.sublayers.push(g(e,c,n)),F++)})),!I)return null;let M,O,w;const v=I.fullExtents;if(M=I.sublayers,M||(M=[]),0===M.length&&M.push(I),O=I.extent,!O){const e=new r(M[0].extent);I.extent=e.toJSON(),O=I.extent}if(w=I.spatialReferences,!w.length&&M.length>0){const e=t=>{let n=[];return t.sublayers.forEach((t=>{!n.length&&t.spatialReferences.length&&(n=t.spatialReferences||e(t))})),n};M.forEach((t=>{w.length||(w=t.spatialReferences||e(t))}))}const C=h(o,\"GetFeatureInfo\");let T;if(C){const e=x(o,\"GetFeatureInfo\");e.indexOf(\"text/html\")>-1?T=\"text/html\":e.indexOf(\"text/plain\")>-1&&(T=\"text/plain\")}if(!T){const e=function(t){t&&(t.queryable=!1,t.sublayers&&t.sublayers.forEach((t=>{e(t)})))};e(I)}const R=u(M),V=I.minScale||0,_=I.maxScale||0,U=I.dimensions,q=R.reduce(((e,t)=>e.concat(t.dimensions)),[]),B=U.concat(q).filter(S);let D=null;if(B.length>0){let e=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY;B.forEach((n=>{const{extent:r}=n;var i;i=r,Array.isArray(i)&&i.length>0&&i[0]instanceof Date?r.forEach((n=>{e=Math.min(e,n.getTime()),t=Math.max(t,n.getTime())})):r.forEach((n=>{e=Math.min(e,n.min.getTime()),t=Math.max(t,n.max.getTime())}))})),D={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[e,t]}}return{copyright:p,description:N,dimensions:U,extent:O,fullExtents:v,featureInfoFormat:T,featureInfoUrl:C,mapUrl:E,maxWidth:b,maxHeight:y,maxScale:_,minScale:V,layers:R,spatialReferences:w,supportedImageFormatTypes:A,timeInfo:D,title:f,version:c}}function o(e){return i.some((t=>{const n=t[0],r=t[1];return e>=n&&e<=r}))}function l(e){return e.length?e.filter((e=>e.popupEnabled&&e.name&&e.queryable)).map((e=>e.name)).join(\",\"):\"\"}function u(e){let t=[];return e.forEach((e=>{t.push(e),e.sublayers&&e.sublayers.length&&(t=t.concat(u(e.sublayers)),delete e.sublayers)})),t}function c(e,t,n){var r;return null!=(r=t.getAttribute(e))?r:n}function m(e,t){for(let n=0;n<t.childNodes.length;n++){const r=t.childNodes[n];if(b(r)&&r.nodeName===e)return r}return null}function f(e,t){const n=[];for(let r=0;r<t.childNodes.length;r++){const i=t.childNodes[r];b(i)&&i.nodeName===e&&n.push(i)}return n}function d(e,t,n){const r=m(e,t);return r?r.textContent:n}function p(e,t,i){if(!e)return null;const a=parseFloat(e.getAttribute(\"minx\")),s=parseFloat(e.getAttribute(\"miny\")),o=parseFloat(e.getAttribute(\"maxx\")),l=parseFloat(e.getAttribute(\"maxy\"));let u,c,m,f;i?(u=isNaN(s)?-Number.MAX_VALUE:s,c=isNaN(a)?-Number.MAX_VALUE:a,m=isNaN(l)?Number.MAX_VALUE:l,f=isNaN(o)?Number.MAX_VALUE:o):(u=isNaN(a)?-Number.MAX_VALUE:a,c=isNaN(s)?-Number.MAX_VALUE:s,m=isNaN(o)?Number.MAX_VALUE:o,f=isNaN(l)?Number.MAX_VALUE:l);const d=new n({wkid:t});return new r({xmin:u,ymin:c,xmax:m,ymax:f,spatialReference:d})}function h(e,n){const r=m(n,e);if(r){const e=m(\"DCPType\",r);if(e){const n=m(\"HTTP\",e);if(n){const e=m(\"Get\",n);if(e){let n=function(e,t,n,r){const i=m(e,n);return i?c(t,i,r):r}(\"OnlineResource\",\"xlink:href\",e,null);if(n)return n.indexOf(\"&\")===n.length-1&&(n=n.substring(0,n.length-1)),function(e,n){const r=[],i=t(e);for(const e in i.query)i.query.hasOwnProperty(e)&&-1===n.indexOf(e.toLowerCase())&&r.push(e+\"=\"+i.query[e]);return i.path+(r.length?\"?\"+r.join(\"&\"):\"\")}(n,[\"service\",\"request\"])}}}}return null}function x(e,t){const n=f(\"Operation\",e);if(0===n.length){return f(\"Format\",m(t,e)).map((e=>e.textContent))}const r=[];return n.forEach((e=>{if(e.getAttribute(\"name\")===t){f(\"Format\",e).forEach((e=>{r.push(e.textContent)}))}})),r}function N(e,t,n){const r=m(t,e);if(!r)return n;const{textContent:i}=r;if(null==i||\"\"===i)return n;const a=Number(i);return isNaN(a)?n:a}function g(e,t,i){var s;if(!e)return null;const l={id:i.idCounter++,fullExtents:[],parentLayerId:null,queryable:\"1\"===e.getAttribute(\"queryable\"),spatialReferences:[],sublayers:null},u=m(\"LatLonBoundingBox\",e),h=m(\"EX_GeographicBoundingBox\",e);let x=null;u&&(x=p(u,4326)),h&&(x=new r(0,0,0,0,new n({wkid:4326})),x.xmin=parseFloat(d(\"westBoundLongitude\",h,\"0\")),x.ymin=parseFloat(d(\"southBoundLatitude\",h,\"0\")),x.xmax=parseFloat(d(\"eastBoundLongitude\",h,\"0\")),x.ymax=parseFloat(d(\"northBoundLatitude\",h,\"0\"))),u||h||(x=new r(-180,-90,180,90,new n({wkid:4326}))),l.minScale=N(e,\"MaxScaleDenominator\",0),l.maxScale=N(e,\"MinScaleDenominator\",0);const b=[\"1.0.0\",\"1.1.0\",\"1.1.1\"].indexOf(t)>-1?\"SRS\":\"CRS\";return Array.prototype.slice.call(e.childNodes).forEach((e=>{if(\"Name\"===e.nodeName)l.name=e.textContent||\"\";else if(\"Title\"===e.nodeName)l.title=e.textContent||\"\";else if(\"Abstract\"===e.nodeName)l.description=e.textContent||\"\";else if(\"BoundingBox\"===e.nodeName){const n=e.getAttribute(b);if(n&&0===n.indexOf(\"EPSG:\")){const r=parseInt(n.substring(5),10);0===r||isNaN(r)||x||(x=\"1.3.0\"===t?p(e,r,o(r)):p(e,r))}const r=n&&n.indexOf(\":\");if(r&&r>-1){let i=parseInt(n.substring(r+1,n.length),10);0===i||isNaN(i)||(i=a[i]?a[i]:i);const s=\"1.3.0\"===t?p(e,i,o(i)):p(e,i);l.fullExtents.push(s)}}else if(e.nodeName===b){e.textContent.split(\" \").forEach((e=>{0===(e=e.indexOf(\":\")>-1?parseInt(e.split(\":\")[1],10):parseInt(e,10))||isNaN(e)||(a[e]&&(e=a[e]),-1===l.spatialReferences.indexOf(e)&&l.spatialReferences.push(e))}))}else if(\"Style\"!==e.nodeName||l.legendURL){if(\"Layer\"===e.nodeName){const n=g(e,t,i);n&&(n.parentLayerId=l.id,l.sublayers||(l.sublayers=[]),l.sublayers.push(n))}}else{const t=m(\"LegendURL\",e);if(t){const e=m(\"OnlineResource\",t);e&&(l.legendURL=e.getAttribute(\"xlink:href\"))}}})),l.extent=null==(s=x)?void 0:s.toJSON(),l.dimensions=f(\"Dimension\",e).filter((e=>e.getAttribute(\"name\")&&e.getAttribute(\"units\")&&e.textContent)).map((e=>{const t=e.getAttribute(\"name\"),n=e.getAttribute(\"units\"),r=e.textContent,i=e.getAttribute(\"unitSymbol\"),a=e.getAttribute(\"default\"),s=\"0\"!==c(\"default\",e,\"0\"),o=\"0\"!==c(\"nearestValue\",e,\"0\"),l=\"0\"!==c(\"current\",e,\"0\");if(/^time$/i.test(t)&&/^ISO8601$/i.test(n)){return{name:\"time\",units:\"ISO8601\",extent:F(r),default:F(a),multipleValues:s,nearestValue:o,current:l}}if(/^elevation$/i.test(t)){return{name:\"elevation\",units:n,extent:I(r),unitSymbol:i,default:I(a),multipleValues:s,nearestValue:o}}return{name:t,units:n,extent:L(r),unitSymbol:i,default:L(a),multipleValues:s,nearestValue:o}})),l}function b(e){return e.nodeType===Node.ELEMENT_NODE}function y(e){return void 0!==e.min&&void 0!==e.max}function A(e){return\"elevation\"===e.name}function E(e){return\"time\"!==e.name&&\"elevation\"!==e.name}function S(e){return\"time\"===e.name}function I(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:parseFloat(t[0]),max:parseFloat(t[1]),resolution:t.length>=3&&\"0\"!==t[2]?parseFloat(t[2]):void 0}})).filter((e=>e)):n.map((e=>parseFloat(e)))}function L(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:t[0],max:t[1],resolution:t.length>=3&&\"0\"!==t[2]?t[2]:void 0}})).filter((e=>e)):n}function F(e){if(!e)return null;const t=-1!==e.indexOf(\"/\"),n=e.split(\",\");return t?n.map((e=>{const t=e.split(\"/\");if(t.length<2)return null;return{min:new Date(t[0]),max:new Date(t[1]),resolution:t.length>=3&&\"0\"!==t[2]?M(t[2]):void 0}})).filter((e=>e)):n.map((e=>new Date(e)))}function M(e){const t=e.match(/(?:p(\\d+y|\\d+(?:.|,)\\d+y)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+d|\\d+(?:.|,)\\d+d)?)?(?:t(\\d+h|\\d+(?:.|,)\\d+h)?(\\d+m|\\d+(?:.|,)\\d+m)?(\\d+s|\\d+(?:.|,)\\d+s)?)?/i);if(!t)return null;return{years:O(t[1]),months:O(t[2]),days:O(t[3]),hours:O(t[4]),minutes:O(t[5]),seconds:O(t[6])}}function O(e){if(!e)return 0;const t=e.match(/(?:\\d+(?:.|,)\\d+|\\d+)/);if(!t)return 0;const n=t[0].replace(\",\",\".\");return Number(n)}function w(e){return e.toISOString().replace(/\\.[0-9]{3}/,\"\")}export{o as coordsReversed,M as fromISODuration,l as getPopupLayers,y as isDimensionInterval,A as isElevationDimension,E as isGenericDimension,S as isTimeDimension,s as parseCapabilities,w as toISOString};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{reject as s,resolve as p}from\"../../core/promiseUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e){const{layer:r}=this;if(!e)return s(new o(\"wmslayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:r}));const{popupEnabled:t}=r;if(!t)return s(new o(\"wmslayerview:fetchPopupFeatures\",\"popupEnabled should be true\",{popupEnabled:t}));const i=this.createFetchPopupFeaturesQuery(e),{extent:c,width:u,height:a,x:n,y:h}=i;if(!(c&&u&&a))throw new o(\"wmslayerview:fetchPopupFeatures\",\"WMSLayer does not support fetching features.\",{extent:c,width:u,height:a});const m=r.fetchFeatureInfo(c,u,a,n,h);return m?m.then((e=>[e])):p([])}};return e([r()],c.prototype,\"layer\",void 0),c=e([t(\"esri.layers.mixins.WMSLayerView\")],c),c};export{i as WMSLayerView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import t from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../core/Error.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import{reject as a,isAbortError as o}from\"../../../core/promiseUtils.js\";import p from\"../../../geometry/Extent.js\";import{RefreshableLayerView as m}from\"../../layers/RefreshableLayerView.js\";import n from\"../../../layers/support/ExportWMSImageParameters.js\";import h from\"../../layers/LayerView.js\";import{WMSLayerView as d}from\"../../layers/WMSLayerView.js\";import{BitmapContainer as l}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import u from\"./support/ExportStrategy.js\";const y=t.getLogger(\"esri.views.2d.layers.WMSLayerView2D\");let g=class extends(d(m(c(h)))){initialize(){const{layer:e,view:t}=this;e.supportsSpatialReference(t.spatialReference)||this.addResolvingPromise(a(new s(\"layerview:spatial-reference-incompatible\",\"The spatial references supported by this WMS layer are incompatible with the spatial reference of the view\",{layer:e})))}hitTest(){return null}update(e){this.strategy.update(e).catch((e=>{o(e)||y.error(e)}))}attach(){const{layer:e,view:t}=this,{imageMaxHeight:r,imageMaxWidth:i}=e;this._bitmapContainer=new l,this.container.addChild(this._bitmapContainer),this.strategy=new u({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:r,imageMaxWidth:i,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this._exportWMSImageParameters=new n({layer:e,view:t}),this.handles.add(this._exportWMSImageParameters.watch(\"version\",(e=>{this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())})),\"wms\")}detach(){this.handles.remove(\"wms\"),this.strategy.destroy(),this._exportWMSImageParameters.layer=null,this._exportWMSImageParameters.destroy(),this._exportWMSImageParameters=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t}=this,r=this._bitmapContainer,{x:i,y:s}=e,{spatialReference:a}=t;let o=null,m=0,n=0;r.children.some((e=>{const{width:t,height:r,resolution:h,x:d,y:l}=e,c=d+h*t,u=l-h*r;return i>=d&&i<=c&&s<=l&&s>=u&&(o=new p({xmin:d,ymin:u,xmax:c,ymax:l,spatialReference:a}),m=t,n=r,!0)}));const h=o.width/m,d=Math.round((i-o.xmin)/h),l=Math.round((o.ymax-s)/h);return{extent:o,width:m,height:n,x:d,y:l}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this._exportWMSImageParameters.timeExtent,timestamp:this.refreshTimestamp,...i})}};e([r()],g.prototype,\"strategy\",void 0),e([r({dependsOn:[\"strategy.updating\"]})],g.prototype,\"updating\",void 0),g=e([i(\"esri.views.2d.layers.WMSLayerView2D\")],g);var f=g;export default f;\n"],"sourceRoot":""}