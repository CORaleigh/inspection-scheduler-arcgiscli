{"version":3,"sources":["webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/GeometryUtils.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/materialKey/MaterialKey.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/meshUtils.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/CollisionGrid.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/layers/features/processors/SymbolProcessor.js"],"names":["Number","POSITIVE_INFINITY","t","Math","PI","o","a","n","h","M","P","log","N","g","r","s","S","e","i","z","from","y","T","E","m","Error","l","c","load","geometryType","this","_data","shared","data","bits","setBits","bit","setBit","mapAligned","pattern","sdf","textureBinding","d","super","hasVV","vvSizeMinMaxValue","vvSizeScaleStops","vvSizeFieldStops","vvSizeUnitValue","setVV","V","vvRotation","p","vvColor","vvOpacity","dotDensity","getVariation","get","toJSON","readOnly","prototype","constructOnly","dependsOn","_bucketSize","_rowsLength","_colsLength","_elementsPerBucket","_grid","_initGrid","floor","Uint8Array","arguments","type","schema","processors","_schema","console","debug","mesh","why","push","_factory","_createFactory","update","tileStore","tileScheme","tileInfo","_onTileData","signal","tileKey","id","error","remoteClient","invoke","objectIdField","fields","service","spatialReference","_store","_matcher","matcher","addOrUpdate","remove","end","clear","_processFeatures","message","transferList","u","_handleError","hasFeatures","transform","hasZ","hasM","viewingMode","scale","_getLabelInfos","analyze","getCursor","_writeFeatureSet","createMeshData","getApproximateSize","next","getDisplayId","writeCursor","level","_encodeDisplayData","Array","encode","readLegacyPointGeometry","checkOverlap","x","readLegacyCentroid","markUsed","labels","filter","minScale","maxScale","length","Map","_shouldDiscard","has","set","readAttribute","target","getStorage","getComputedStringAtIndex","fieldIndex","toString","getMosaicItem","symbol","then","index","glyphs","glyphMosaicItems","rtl","_markUsed"],"mappings":"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","file":"chunks/456.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nconst n=Number.POSITIVE_INFINITY,t=Math.PI,r=2*t,u=t/2,o=128/t,e=t/128,c=256/360,f=t/180,i=1.414213562,I=1/1.414213562,N=1/Math.LN2;function a(n,t){return(n%=t)>=0?n:n+t}function h(n){return a(n*o,256)}function M(n){return a(.7111111111111111*n,256)}function P(n){return Math.log(n)*N}function T(n){return n*n}function b(n,t,r){return n*(1-r)+t*r}function g(n,t,r){return n>=t&&n<=r||n>=r&&n<=t}export{e as C_256_TO_RAD,r as C_2PI,c as C_DEG_TO_256,f as C_DEG_TO_RAD,n as C_INFINITY,t as C_PI,u as C_PI_BY_2,o as C_RAD_TO_256,i as C_SQRT2,I as C_SQRT2_INV,g as between,M as degToByte,b as interpolate,P as log2,a as positiveMod,h as radToByte,T as sqr};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{WGLVVFlag as e,WGLVVTarget as i,WGLGeometryType as s}from\"../enums.js\";import{isMapAligned as r}from\"../mesh/templates/meshUtils.js\";function a(t,s=!1){const r=e.SIZE_FIELD_STOPS|e.SIZE_MINMAX_VALUE|e.SIZE_SCALE_STOPS|e.SIZE_UNIT_VALUE,a=(t&(i.FIELD_TARGETS_OUTLINE|i.MINMAX_TARGETS_OUTLINE|i.SCALE_TARGETS_OUTLINE|i.UNIT_TARGETS_OUTLINE))>>>4;return s?r&a:r&~a}function n(t){const i=a(t,!1);return t&(e.COLOR|e.OPACITY|e.ROTATION|i)}function o(t){return t&(e.COLOR|e.OPACITY)}function v(t,i){if(i){return t&a(t,!0)}const s=a(t,!1);return t&(e.COLOR|e.OPACITY|s)}function h(t){return n(t)}function u(t){return t&a(t,!1)}function S(t,e,i,r,a){switch(t){case s.FILL:return z.from(e,r);case s.LINE:return y.from(e,i);case s.MARKER:return T.from(e);case s.TEXT:return E.from(e);case s.LABEL:return m.from(e,a);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${t}`)}}function l(t){switch(c.load(t).geometryType){case s.MARKER:return new T(t);case s.FILL:return new z(t);case s.LINE:return new y(t);case s.TEXT:return new E(t);case s.LABEL:return new m(t)}}class c{constructor(t){this._data=0,this._data=t}static load(t){const e=this.shared;return e.data=t,e}set data(t){this._data=t}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(t){this.setBits(t,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(t){this.setBit(20,t)}get sdf(){return!!this.bit(11)}set sdf(t){this.setBit(11,t)}get pattern(){return!!this.bit(12)}set pattern(t){this.setBit(12,t)}get textureBinding(){return this.bits(0,8)}set textureBinding(t){this.setBits(t,0,8)}get geometryTypeString(){switch(this.geometryType){case s.FILL:return\"fill\";case s.MARKER:return\"marker\";case s.LINE:return\"line\";case s.TEXT:return\"text\";case s.LABEL:return\"label\";default:throw new t(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(t,e){const i=1<<t;e?this._data|=i:this._data&=~i}bit(t){return(this._data&1<<t)>>t}setBits(t,e,i){for(let s=e,r=0;s<i;s++,r++)this.setBit(s,0!=(t&1<<r))}bits(t,e){let i=0;for(let s=t,r=0;s<e;s++,r++)i|=this.bit(s)<<r;return i}hasVV(){return!1}setVV(t,e){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(7&this.textureBinding)}}c.shared=new c(0);const d=t=>class extends t{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(t){this.setBit(16,t)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(t){this.setBit(17,t)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(t){this.setBit(18,t)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(t){this.setBit(19,t)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(t,i){super.setVV(t,i);const s=a(t,i)&t;this.vvSizeMinMaxValue=!!(s&e.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&e.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&e.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&e.SIZE_SCALE_STOPS)}},V=t=>class extends t{get vvRotation(){return 0!==this.bit(15)}set vvRotation(t){this.setBit(15,t)}hasVV(){return super.hasVV()||this.vvRotation}setVV(t,i){super.setVV(t,i),this.vvRotation=!i&&!!(t&e.ROTATION)}},p=t=>class extends t{get vvColor(){return 0!==this.bit(13)}set vvColor(t){this.setBit(13,t)}hasVV(){return super.hasVV()||this.vvColor}setVV(t,i){super.setVV(t,i),this.vvColor=!i&&!!(t&e.COLOR)}},g=t=>class extends t{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(t){this.setBit(14,t)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(t,i){super.setVV(t,i),this.vvOpacity=!i&&!!(t&e.OPACITY)}};class z extends(p(g(c))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=s.FILL,e?i.dotDensity=!0:i.setVV(t,!1),i.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}}get dotDensity(){return!!this.bit(15)}set dotDensity(t){this.setBit(15,t)}}z.shared=new z(0);class T extends(p(g(V(d(c))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(0);return e.geometryType=s.MARKER,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}T.shared=new T(0);class y extends(p(g(d(c)))){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=s.LINE,i.setVV(t,e),i.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}y.shared=new y(0);class E extends(p(g(V(d(c))))){static load(t){const e=this.shared;return e.data=t,e}static from(t){const e=this.load(t);return e.geometryType=s.TEXT,e.setVV(t,!1),e.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}E.shared=new E(0);class m extends(d(c)){static load(t){const e=this.shared;return e.data=t,e}static from(t,e){const i=this.load(0);return i.geometryType=s.LABEL,i.setVV(t,!1),i.mapAligned=!!r(e),i.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}m.shared=new m(0);export{z as FillMaterialKey,m as LabelMaterialKey,y as LineMaterialKey,T as MarkerMaterialKey,c as MaterialKeyBase,E as TextMaterialKey,S as createMaterialKey,o as getFillVVFlags,u as getLabelVVFlags,v as getLineVVFlags,n as getMarkerVVFlags,a as getSizeFlagsMask,h as getTextVVFlags,l as hydrateMaterialKey};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction e(e){switch(e){case\"above-along\":case\"below-along\":case\"center-along\":return 1;default:return 0}}export{e as isMapAligned};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{HandleOwner as o}from\"../../../../../core/HandleOwner.js\";let s=class extends o{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get(\"tileStore.tileScheme.spatialReference\");return e&&e.toJSON()||null}};e([r({readOnly:!0})],s.prototype,\"supportsTileUpdates\",null),e([r({constructOnly:!0})],s.prototype,\"remoteClient\",void 0),e([r({constructOnly:!0})],s.prototype,\"service\",void 0),e([r({dependsOn:[\"tileStore.tileScheme.spatialReference\"]})],s.prototype,\"spatialReference\",null),e([r({constructOnly:!0})],s.prototype,\"tileInfo\",void 0),e([r({constructOnly:!0})],s.prototype,\"tileStore\",void 0),s=e([t(\"esri.views.2d.layers.features.processors.BaseProcessor\")],s);var p=s;export default p;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{TILE_SIZE as t}from\"../definitions.js\";class i{constructor(i,s=2){this._bucketSize=i,this._rowsLength=t/i,this._colsLength=t/i,this._elementsPerBucket=s,this._grid=this._initGrid()}checkOverlap(t,i){const s=Math.floor(t/this._bucketSize),e=Math.floor(i/this._bucketSize);return s<0||s>=this._rowsLength||e<0||e>=this._colsLength||this._grid[e*this._colsLength+s]>=this._elementsPerBucket}markUsed(t,i){const s=Math.floor(t/this._bucketSize),e=Math.floor(i/this._bucketSize);this._grid[e*this._colsLength+s]+=1}reset(){this._grid=this._initGrid()}_initGrid(){return new Uint8Array(this._rowsLength*this._colsLength)}}export{i as CollisionGrid};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import t from\"../../../../../core/has.js\";import{andThen as r,unwrap as s,isNone as o,isSome as i}from\"../../../../../core/maybe.js\";import a from\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/Error.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{throwIfAborted as c,isAbortError as l}from\"../../../../../core/promiseUtils.js\";import m from\"../../../../../geometry/SpatialReference.js\";import{diff as p,hasDiff as d}from\"../../../../../core/accessorSupport/diffUtils.js\";import{COLLISION_EARLY_REJECT_BUCKET_SIZE as u}from\"../../../engine/webgl/definitions.js\";import{bidiText as h}from\"../../../engine/webgl/util/BidiText.js\";import{createMatcher as g}from\"../../../engine/webgl/mesh/factories/matcherUtils.js\";import{codepoints as y}from\"../textUtils.js\";import{WGLTemplateStore as f}from\"../../../engine/webgl/mesh/templates/WGLTemplateStore.js\";import{WGLMeshFactory as _}from\"../../../engine/webgl/mesh/factories/WGLMeshFactory.js\";import{isAggregateId as b}from\"../support/AttributeStore.js\";import{CollisionGrid as j}from\"../../../engine/webgl/collisions/CollisionGrid.js\";import w from\"./BaseProcessor.js\";a.getLogger(\"esri.views.2d.layers.features.processors.SymbolProcessor\");let S=class extends w{constructor(){super(...arguments),this.type=\"symbol\"}destroy(){}get supportsTileUpdates(){return!0}async update(e,r){const s=r.schema.processors[0];if(\"symbol\"!==s.type)return;const o=p(this._schema,s);d(o,\"mesh\")&&(t(\"esri-2d-update-debug\")&&console.debug(\"Applying Update - Processor:\",o),e.mesh=!0,e.why.mesh.push(\"Symbology changed\"),this._schema=s,this._factory=this._createFactory(s),this._factory.update(s,this.tileStore.tileScheme.tileInfo))}onTileData(e,t,r){return c(r),this._onTileData(e,t,r)}onTileError(e,t,r){const s=r.signal,o={tileKey:e.id,error:t};return this.remoteClient.invoke(\"tileRenderer.onTileError\",o,{signal:s})}_createFactory(e){const{geometryType:t,objectIdField:r,fields:s}=this.service,o={geometryType:t,fields:s,spatialReference:m.fromJSON(this.spatialReference)},i=new f(((e,t)=>this.remoteClient.invoke(\"tileRenderer.getMaterialItems\",e,t)),!1);return this._store=i,this._matcher=g(e.mesh.matcher,i,o),new _(t,r,i)}async _onTileData(e,t,o){const{type:i,addOrUpdate:a,remove:n,end:l}=t;if(!a){const t={type:i,addOrUpdate:null,remove:n,clear:!1,end:l};return this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:t},o)}const m=this._processFeatures(e,a,o),p=o.signal;try{const t=await m,o=r(t,(e=>e.message)),a=r(t,(e=>e.transferList))||[],d={type:i,addOrUpdate:o,remove:n,clear:!1,end:l},u={transferList:s(a)||[],signal:p};return c(u),this.remoteClient.invoke(\"tileRenderer.onTileData\",{tileKey:e.id,data:d},u)}catch(t){this._handleError(e,t,o)}}async _processFeatures(e,t,r){if(o(t)||!t.hasFeatures)return null;const s={transform:e.transform,hasZ:!1,hasM:!1},i=this._factory,a={viewingMode:\"\",scale:e.scale},n=await this._matcher;c(r);const l=this._getLabelInfos(e,t);return await i.analyze(t.getCursor(),n,s,a),c(r),this._writeFeatureSet(e,t,s,l,i)}_writeFeatureSet(e,t,r,s,o){const a=o.createMeshData(t.getApproximateSize()),n={viewingMode:\"\",scale:e.scale},c=t.getCursor();for(;c.next();)try{const t=c.getDisplayId(),l=i(s)?s.get(t):null;o.writeCursor(a,c,r,n,e.level,l)}catch(e){}return this._encodeDisplayData(a)}_encodeDisplayData(e){const t={},r=new Array;return e.encode(t,r),{message:t,transferList:r}}_handleError(e,t,r){if(!l(t)){const s={tileKey:e.id,error:t.message};return this.remoteClient.invoke(\"tileRenderer.onTileError\",s,{signal:r.signal})}}_shouldDiscard(e,t){switch(this.service.geometryType){case\"esriGeometryPoint\":{const r=t.readLegacyPointGeometry();return!r||e.checkOverlap(r.x,r.y)}case\"esriGeometryPolygon\":{const r=t.readLegacyCentroid();return!r||e.checkOverlap(r.x,r.y)}default:return!1}}_markUsed(e,t){switch(this.service.geometryType){case\"esriGeometryPoint\":{const{x:r,y:s}=t.readLegacyPointGeometry();return e.markUsed(r,s)}case\"esriGeometryPolygon\":{const{x:r,y:s}=t.readLegacyCentroid();return e.markUsed(r,s)}}}_getLabelInfos(e,t){const s=this._schema.mesh.labels,i=r(s,(t=>t.filter((t=>function(e,t){return(!e.minScale||e.minScale>=t)&&(!e.maxScale||e.maxScale<=t)}(t,e.scale)))));if(o(i)||0===i.length)return null;const a=new Map,n=new j(u),c=t.getCursor();for(;c.next();){const e=c.getDisplayId();if(this._shouldDiscard(n,c)){a.has(e)||a.set(e,null);continue}let t=!1;const r=[],s=b(e),o=s&&1!==c.readAttribute(\"cluster_count\")?\"aggregate\":\"feature\";for(const a of i){if(a.target!==o)continue;const i=c.getStorage(),n=s&&\"feature\"===o?i.getComputedStringAtIndex(c.readAttribute(\"referenceId\"),a.fieldIndex):i.getComputedStringAtIndex(e,a.fieldIndex);if(!n)continue;const l=h(n.toString()),m=l[0],p=l[1];this._store.getMosaicItem(a.symbol,y(m)).then((e=>{r[a.index]={glyphs:e.glyphMosaicItems,rtl:p,index:a.index}})),t=!0}a.set(e,r),t&&this._markUsed(n,c)}return a}};S=e([n(\"esri.views.2d.layers.features.processors.SymbolProcessor\")],S);var x=S;export default x;\n"],"sourceRoot":""}