{"version":3,"sources":["webpack://inspection-scheduler/./node_modules/@arcgis/core/core/cookie.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/identity/IdentityForm.js","webpack://inspection-scheduler/./node_modules/focus-trap/dist/focus-trap.esm.js","webpack://inspection-scheduler/./node_modules/tabbable/dist/index.esm.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/identity/IdentityModal.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/identity/OAuthCredential.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/identity/OAuthInfo.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/identity/ServerInfo.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/identity/IdentityManagerBase.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/identity/IdentityManager.js"],"names":["t","o","n","i","expires","e","Date","setTime","getTime","toUTCString","r","encodeURIComponent","document","cookie","a","d","m","h","b","s","super","this","_usernameInputNode","_passwordInputNode","messages","signingIn","server","resource","error","oAuthPrompt","l","class","oAuthInfo","info","test","lblItem","g","lblUser","value","required","autocomplete","spellcheck","type","bind","afterCreate","f","lblPwd","_","classes","disabled","lblSigning","lblOk","lblCancel","onclick","_cancel","y","details","httpStatus","invalidUser","noAuthService","onsubmit","_submit","_set","emit","preventDefault","username","password","prototype","activeFocusDelay","candidateSelectors","candidateSelector","join","matches","Element","msMatchesSelector","webkitMatchesSelector","getCandidates","el","includeContainer","filter","candidates","Array","slice","apply","querySelectorAll","call","unshift","getTabindex","node","tabindexAttr","parseInt","getAttribute","isNaN","contentEditable","isContentEditable","nodeName","tabIndex","sortOrderedTabbables","documentOrder","isInput","tagName","isNonTabbableRadio","isRadio","name","radioSet","radioScope","form","ownerDocument","queryRadios","window","CSS","escape","err","console","message","checked","nodes","length","getCheckedRadio","isTabbableRadio","isNodeMatchingSelectorFocusable","isHiddenInput","getComputedStyle","visibility","nodeUnderDetails","parentElement","display","isHidden","children","some","child","isDetailsWithSummary","isNodeMatchingSelectorTabbable","focusableCandidateSelector","concat","isFocusable","Error","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","push","trapQueue","activeFocusTraps","activateTrap","trap","activeTrap","pause","trapIndex","indexOf","splice","deactivateTrap","unpause","delay","fn","setTimeout","findIndex","arr","idx","every","createFocusTrap","elements","userOptions","doc","config","target","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread2","returnFocusOnDeactivate","escapeDeactivates","delayInitialFocus","state","containers","tabbableGroups","nodeFocusedBeforeActivation","mostRecentlyFocusedNode","active","paused","containersContain","element","container","contains","getNodeForOption","optionName","optionValue","querySelector","getInitialFocusNode","activeElement","firstTabbableGroup","firstTabbableNode","updateTabbableNodes","map","options","regularTabbables","orderedTabbables","tabbableNodes","candidate","candidateTabindex","sort","lastTabbableNode","group","tryFocus","focus","preventScroll","toLowerCase","select","isSelectableInput","checkPointerDown","clickOutsideDeactivates","deactivate","returnFocus","allowOutsideClick","checkFocusIn","targetContained","Document","stopImmediatePropagation","checkKey","keyCode","isEscapeEvent","isTabEvent","destinationNode","shiftKey","startOfGroupIndex","_ref","destinationGroupIndex","lastOfGroupIndex","_ref2","_destinationGroupIndex","checkTab","checkClick","addListeners","addEventListener","capture","passive","removeListeners","removeEventListener","activate","activateOptions","onActivate","deactivateOptions","clearTimeout","onDeactivate","undefined","previousActiveElement","updateContainerElements","containerElements","elementsAsArray","Boolean","createElement","content","open","_close","body","appendChild","own","watch","_toggleFocusTrap","_destroyFocusTrap","id","title","c","close","v","role","_createFocusTrap","_renderContent","_focusTrap","requestAnimationFrame","initialFocus","innerHTML","render","HTMLElement","_attachToNode","readOnly","aliasOf","storage","appId","ssl","token","userId","_init","now","minTimeUntilExpiration","_load","authNamespace","portalUrl","setItem","JSON","stringify","log","replace","FormData","append","navigator","sendBeacon","XMLHttpRequest","send","_oAuthCred","getItem","parse","declaredClass","expiration","forceLogin","forceUserId","locale","popup","popupCallbackUrl","popupWindowFeatures","preserveUrlHash","fromJSON","toJSON","json","write","adminTokenServiceUrl","currentVersion","hasPortal","hasServer","owningSystemUrl","owningTenant","shortLivedTokenValidity","tokenServiceUrl","webTierAuth","D","j","host","q","E","_portalConfig","serverInfos","oAuthInfos","credentials","_soReqs","_xoReqs","_portals","defaultOAuthInfo","defaultTokenValidity","dialog","formConstructor","tokenValidity","signInPage","useSignInPage","normalizeWebTierAuth","_busy","_rejectOnPersistedPageShow","_oAuthHash","_gwTokenUrl","_agsRest","_agsPortal","_agsAdmin","_adminSvcs","_gwDomains","regex","customBaseUrl","_legacyFed","_regexSDirUrl","_regexServerType","_gwUser","_gwItem","_gwGroup","_rePortalTokenSvc","_createDefaultOAuthInfo","_hasTestedIfAppIsOnPortal","_getOAuthHash","_pageShowHandler","findServerInfo","findOAuthInfo","_sanitizeUrl","_isServerRsrc","_getServerInstanceRoot","_getTokenSvcUrl","registerServers","_findCredential","L","scope","resources","emitTokenChange","refreshServerTokens","registerOAuthInfos","_hasSameServerInstance","_getIdenticalSvcIdx","prompt","signal","abort","reject","promise","_isAdminResource","_doPortalSignIn","_getEsriAuthCookie","findCredential","destroy","path","domain","location","hostname","endsWith","email","u","resolve","p","_restInfoPms","_selfReq","_findOAuthInfo","selfDfd","_getPortalSelf","_enqueue","_isRESTService","href","S","w","isAdmin","serverUrl","customParameters","auth_tier","scheme","uri","port","query","request","referer","client","method","authMode","useProxy","_useProxy","ioArgs","withCredentials","then","data","validity","checkAppAccess","credential","getCredential","force","client_id","valid","viewOnlyUserTypeApp","catch","viewOnly","_oAuthDfd","clearInterval","_oAuthIntervalId","_oAuthOnHashHandle","remove","charAt","substring","error_description","sinfo_","oinfo_","access_token","Number","expires_in","persist","localStorage","sessionStorage","save","_redirectFunc","_oAuthRedirectFunc","_protocolFunc","getResourceName","on","generateToken","oAuthWin_","closed","resUrl_","oAuthPopupConfirmation","_doOAuthSignIn","hash","hasOwnProperty","persisted","isBusy","_errbackFunc","_addResource","_removeResource","_isIdProvider","_isPortalDomain","String","search","substr","_normalizeAGOLorgDomain","_getSuffix","restBaseUrl","_isIdenticalService","adminUrl","_getOrigin","allSSL","portalMode","supportsOAuth","protocol","cookieEnabled","_getAllCookies","portalApp","urlKey","match","RegExp","decodeURIComponent","top","_hasPortalSession","trim","resourceUrl","serverInfo","options_","admin_","refresh_","_doSignIn","creationTime","shift","_canUsePortalSignInWorkflow","_pendingDfd","_exchangeToken","baseUrl","signin","useSSL","returnUrlParamName","returnUrl","isValid","oAuthState","oAuthSignIn","_checkProtocol","signIn","user","portalToken","tokenExpiration","parseFloat","_generateOAuthInfo","accountId","redirect_uri","clone","response_type","force_login","prepopulatedusername","setInterval","setOAuthResponseHash","detail","authorizeParams","authorizeUrl","tokenRefreshBuffer","_enqueued","refreshToken","_refreshTimer","_startRefreshTimer"],"mappings":"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","file":"chunks/2057.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{assumeNonNull as e}from\"./maybe.js\";function t(t,o,n={}){let i=e(n.expires);if(\"number\"==typeof i){const e=new Date;e.setTime(e.getTime()+24*i*60*60*1e3),i=n.expires=e}\"string\"!=typeof i&&(n.expires=i.toUTCString());let r=t+\"=\"+encodeURIComponent(o);for(const e in n){r+=\"; \"+e;const t=n[e];!0!==t&&(r+=\"=\"+t)}document.cookie=r}export{t as writeCookie};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{substitute as r}from\"../intl/substitute.js\";import{storeNode as o}from\"../widgets/support/widgetUtils.js\";import{messageBundle as i}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as n}from\"../widgets/support/decorators/renderable.js\";import{j as u}from\"../chunks/index.js\";import l from\"../widgets/Widget.js\";const p=\"esri-identity-form\",a=\"esri-identity-form__group\",d=\"esri-identity-form__label\",c=\"esri-identity-form__footer\",m=\"esri-input\",h=\"esri-button\",v=\"esri-button--secondary\";let b=class extends l{constructor(s,e){super(s,e),this._usernameInputNode=null,this._passwordInputNode=null,this.messages=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:s,server:e,resource:t,signingIn:i,oAuthPrompt:n,messages:l}=this,b=u(\"div\",{class:a},r(n?l.oAuthInfo:l.info,{server:/\\.arcgis\\.com/i.test(e)?\"ArcGIS Online\":e,resource:`(${t||l.lblItem})`})),g=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblUser,u(\"input\",{value:\"\",required:!0,autocomplete:\"off\",spellcheck:!1,type:\"text\",bind:this,afterCreate:o,\"data-node-ref\":\"_usernameInputNode\",class:m}))),f=n?null:u(\"div\",{class:a},u(\"label\",{class:d},l.lblPwd,u(\"input\",{value:\"\",required:!0,type:\"password\",bind:this,afterCreate:o,\"data-node-ref\":\"_passwordInputNode\",class:m}))),_=u(\"div\",{class:this.classes(a,c)},u(\"input\",{type:\"submit\",disabled:!!i,value:i?l.lblSigning:l.lblOk,class:h}),u(\"input\",{type:\"button\",value:l.lblCancel,bind:this,onclick:this._cancel,class:this.classes(h,v)})),y=s?u(\"div\",null,s.details&&s.details.httpStatus?l.invalidUser:l.noAuthService):null;return u(\"form\",{class:p,bind:this,onsubmit:this._submit},b,y,g,f,_)}_cancel(){this._set(\"signingIn\",!1),this._usernameInputNode&&(this._usernameInputNode.value=\"\"),this._passwordInputNode&&(this._passwordInputNode.value=\"\"),this.emit(\"cancel\")}_submit(s){s.preventDefault(),this._set(\"signingIn\",!0);const e=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit(\"submit\",e)}};s([e(),n(),i(\"esri/identity/t9n/identity\")],b.prototype,\"messages\",void 0),s([e(),n()],b.prototype,\"signingIn\",void 0),s([e(),n()],b.prototype,\"server\",void 0),s([e(),n()],b.prototype,\"resource\",void 0),s([e(),n()],b.prototype,\"error\",void 0),s([e(),n()],b.prototype,\"oAuthPrompt\",void 0),b=s([t(\"esri.identity.IdentityForm\")],b);var g=b;export default g;\n","/*!\n* focus-trap 6.2.3\n* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE\n*/\nimport { tabbable, isFocusable } from 'tabbable';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar activeFocusDelay;\n\nvar activeFocusTraps = function () {\n  var trapQueue = [];\n  return {\n    activateTrap: function activateTrap(trap) {\n      if (trapQueue.length > 0) {\n        var activeTrap = trapQueue[trapQueue.length - 1];\n\n        if (activeTrap !== trap) {\n          activeTrap.pause();\n        }\n      }\n\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex === -1) {\n        trapQueue.push(trap);\n      } else {\n        // move this existing trap to the front of the queue\n        trapQueue.splice(trapIndex, 1);\n        trapQueue.push(trap);\n      }\n    },\n    deactivateTrap: function deactivateTrap(trap) {\n      var trapIndex = trapQueue.indexOf(trap);\n\n      if (trapIndex !== -1) {\n        trapQueue.splice(trapIndex, 1);\n      }\n\n      if (trapQueue.length > 0) {\n        trapQueue[trapQueue.length - 1].unpause();\n      }\n    }\n  };\n}();\n\nvar isSelectableInput = function isSelectableInput(node) {\n  return node.tagName && node.tagName.toLowerCase() === 'input' && typeof node.select === 'function';\n};\n\nvar isEscapeEvent = function isEscapeEvent(e) {\n  return e.key === 'Escape' || e.key === 'Esc' || e.keyCode === 27;\n};\n\nvar isTabEvent = function isTabEvent(e) {\n  return e.key === 'Tab' || e.keyCode === 9;\n};\n\nvar delay = function delay(fn) {\n  return setTimeout(fn, 0);\n}; // Array.find/findIndex() are not supported on IE; this replicates enough\n//  of Array.findIndex() for our needs\n\n\nvar findIndex = function findIndex(arr, fn) {\n  var idx = -1;\n  arr.every(function (value, i) {\n    if (fn(value)) {\n      idx = i;\n      return false; // break\n    }\n\n    return true; // next\n  });\n  return idx;\n};\n\nvar createFocusTrap = function createFocusTrap(elements, userOptions) {\n  var doc = document;\n\n  var config = _objectSpread2({\n    returnFocusOnDeactivate: true,\n    escapeDeactivates: true,\n    delayInitialFocus: true\n  }, userOptions);\n\n  var state = {\n    // @type {Array<HTMLElement>}\n    containers: [],\n    // list of objects identifying the first and last tabbable nodes in all containers/groups in\n    //  the trap\n    // NOTE: it's possible that a group has no tabbable nodes if nodes get removed while the trap\n    //  is active, but the trap should never get to a state where there isn't at least one group\n    //  with at least one tabbable node in it (that would lead to an error condition that would\n    //  result in an error being thrown)\n    // @type {Array<{ firstTabbableNode: HTMLElement|null, lastTabbableNode: HTMLElement|null }>}\n    tabbableGroups: [],\n    nodeFocusedBeforeActivation: null,\n    mostRecentlyFocusedNode: null,\n    active: false,\n    paused: false\n  };\n  var trap; // eslint-disable-line prefer-const -- some private functions reference it, and its methods reference private functions, so we must declare here and define later\n\n  var containersContain = function containersContain(element) {\n    return state.containers.some(function (container) {\n      return container.contains(element);\n    });\n  };\n\n  var getNodeForOption = function getNodeForOption(optionName) {\n    var optionValue = config[optionName];\n\n    if (!optionValue) {\n      return null;\n    }\n\n    var node = optionValue;\n\n    if (typeof optionValue === 'string') {\n      node = doc.querySelector(optionValue);\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` refers to no known node\"));\n      }\n    }\n\n    if (typeof optionValue === 'function') {\n      node = optionValue();\n\n      if (!node) {\n        throw new Error(\"`\".concat(optionName, \"` did not return a node\"));\n      }\n    }\n\n    return node;\n  };\n\n  var getInitialFocusNode = function getInitialFocusNode() {\n    var node;\n\n    if (getNodeForOption('initialFocus') !== null) {\n      node = getNodeForOption('initialFocus');\n    } else if (containersContain(doc.activeElement)) {\n      node = doc.activeElement;\n    } else {\n      var firstTabbableGroup = state.tabbableGroups[0];\n      var firstTabbableNode = firstTabbableGroup && firstTabbableGroup.firstTabbableNode;\n      node = firstTabbableNode || getNodeForOption('fallbackFocus');\n    }\n\n    if (!node) {\n      throw new Error('Your focus-trap needs to have at least one focusable element');\n    }\n\n    return node;\n  };\n\n  var updateTabbableNodes = function updateTabbableNodes() {\n    state.tabbableGroups = state.containers.map(function (container) {\n      var tabbableNodes = tabbable(container);\n\n      if (tabbableNodes.length > 0) {\n        return {\n          firstTabbableNode: tabbableNodes[0],\n          lastTabbableNode: tabbableNodes[tabbableNodes.length - 1]\n        };\n      }\n\n      return undefined;\n    }).filter(function (group) {\n      return !!group;\n    }); // remove groups with no tabbable nodes\n    // throw if no groups have tabbable nodes and we don't have a fallback focus node either\n\n    if (state.tabbableGroups.length <= 0 && !getNodeForOption('fallbackFocus')) {\n      throw new Error('Your focus-trap must have at least one container with at least one tabbable node in it at all times');\n    }\n  };\n\n  var tryFocus = function tryFocus(node) {\n    if (node === doc.activeElement) {\n      return;\n    }\n\n    if (!node || !node.focus) {\n      tryFocus(getInitialFocusNode());\n      return;\n    }\n\n    node.focus({\n      preventScroll: !!config.preventScroll\n    });\n    state.mostRecentlyFocusedNode = node;\n\n    if (isSelectableInput(node)) {\n      node.select();\n    }\n  };\n\n  var getReturnFocusNode = function getReturnFocusNode(previousActiveElement) {\n    var node = getNodeForOption('setReturnFocus');\n    return node ? node : previousActiveElement;\n  }; // This needs to be done on mousedown and touchstart instead of click\n  // so that it precedes the focus event.\n\n\n  var checkPointerDown = function checkPointerDown(e) {\n    if (containersContain(e.target)) {\n      // allow the click since it ocurred inside the trap\n      return;\n    }\n\n    if (config.clickOutsideDeactivates) {\n      // immediately deactivate the trap\n      trap.deactivate({\n        // if, on deactivation, we should return focus to the node originally-focused\n        //  when the trap was activated (or the configured `setReturnFocus` node),\n        //  then assume it's also OK to return focus to the outside node that was\n        //  just clicked, causing deactivation, as long as that node is focusable;\n        //  if it isn't focusable, then return focus to the original node focused\n        //  on activation (or the configured `setReturnFocus` node)\n        // NOTE: by setting `returnFocus: false`, deactivate() will do nothing,\n        //  which will result in the outside click setting focus to the node\n        //  that was clicked, whether it's focusable or not; by setting\n        //  `returnFocus: true`, we'll attempt to re-focus the node originally-focused\n        //  on activation (or the configured `setReturnFocus` node)\n        returnFocus: config.returnFocusOnDeactivate && !isFocusable(e.target)\n      });\n      return;\n    } // This is needed for mobile devices.\n    // (If we'll only let `click` events through,\n    // then on mobile they will be blocked anyways if `touchstart` is blocked.)\n\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      // allow the click outside the trap to take place\n      return;\n    } // otherwise, prevent the click\n\n\n    e.preventDefault();\n  }; // In case focus escapes the trap for some strange reason, pull it back in.\n\n\n  var checkFocusIn = function checkFocusIn(e) {\n    var targetContained = containersContain(e.target); // In Firefox when you Tab out of an iframe the Document is briefly focused.\n\n    if (targetContained || e.target instanceof Document) {\n      if (targetContained) {\n        state.mostRecentlyFocusedNode = e.target;\n      }\n    } else {\n      // escaped! pull it back in to where it just left\n      e.stopImmediatePropagation();\n      tryFocus(state.mostRecentlyFocusedNode || getInitialFocusNode());\n    }\n  }; // Hijack Tab events on the first and last focusable nodes of the trap,\n  // in order to prevent focus from escaping. If it escapes for even a\n  // moment it can end up scrolling the page and causing confusion so we\n  // kind of need to capture the action at the keydown phase.\n\n\n  var checkTab = function checkTab(e) {\n    updateTabbableNodes();\n    var destinationNode = null;\n\n    if (state.tabbableGroups.length > 0) {\n      if (e.shiftKey) {\n        var startOfGroupIndex = findIndex(state.tabbableGroups, function (_ref) {\n          var firstTabbableNode = _ref.firstTabbableNode;\n          return e.target === firstTabbableNode;\n        });\n\n        if (startOfGroupIndex >= 0) {\n          var destinationGroupIndex = startOfGroupIndex === 0 ? state.tabbableGroups.length - 1 : startOfGroupIndex - 1;\n          var destinationGroup = state.tabbableGroups[destinationGroupIndex];\n          destinationNode = destinationGroup.lastTabbableNode;\n        }\n      } else {\n        var lastOfGroupIndex = findIndex(state.tabbableGroups, function (_ref2) {\n          var lastTabbableNode = _ref2.lastTabbableNode;\n          return e.target === lastTabbableNode;\n        });\n\n        if (lastOfGroupIndex >= 0) {\n          var _destinationGroupIndex = lastOfGroupIndex === state.tabbableGroups.length - 1 ? 0 : lastOfGroupIndex + 1;\n\n          var _destinationGroup = state.tabbableGroups[_destinationGroupIndex];\n          destinationNode = _destinationGroup.firstTabbableNode;\n        }\n      }\n    } else {\n      destinationNode = getNodeForOption('fallbackFocus');\n    }\n\n    if (destinationNode) {\n      e.preventDefault();\n      tryFocus(destinationNode);\n    }\n  };\n\n  var checkKey = function checkKey(e) {\n    if (config.escapeDeactivates !== false && isEscapeEvent(e)) {\n      e.preventDefault();\n      trap.deactivate();\n      return;\n    }\n\n    if (isTabEvent(e)) {\n      checkTab(e);\n      return;\n    }\n  };\n\n  var checkClick = function checkClick(e) {\n    if (config.clickOutsideDeactivates) {\n      return;\n    }\n\n    if (containersContain(e.target)) {\n      return;\n    }\n\n    if (config.allowOutsideClick && (typeof config.allowOutsideClick === 'boolean' ? config.allowOutsideClick : config.allowOutsideClick(e))) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopImmediatePropagation();\n  }; //\n  // EVENT LISTENERS\n  //\n\n\n  var addListeners = function addListeners() {\n    if (!state.active) {\n      return;\n    } // There can be only one listening focus trap at a time\n\n\n    activeFocusTraps.activateTrap(trap); // Delay ensures that the focused element doesn't capture the event\n    // that caused the focus trap activation.\n\n    activeFocusDelay = config.delayInitialFocus ? delay(function () {\n      tryFocus(getInitialFocusNode());\n    }) : tryFocus(getInitialFocusNode());\n    doc.addEventListener('focusin', checkFocusIn, true);\n    doc.addEventListener('mousedown', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('touchstart', checkPointerDown, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('click', checkClick, {\n      capture: true,\n      passive: false\n    });\n    doc.addEventListener('keydown', checkKey, {\n      capture: true,\n      passive: false\n    });\n    return trap;\n  };\n\n  var removeListeners = function removeListeners() {\n    if (!state.active) {\n      return;\n    }\n\n    doc.removeEventListener('focusin', checkFocusIn, true);\n    doc.removeEventListener('mousedown', checkPointerDown, true);\n    doc.removeEventListener('touchstart', checkPointerDown, true);\n    doc.removeEventListener('click', checkClick, true);\n    doc.removeEventListener('keydown', checkKey, true);\n    return trap;\n  }; //\n  // TRAP DEFINITION\n  //\n\n\n  trap = {\n    activate: function activate(activateOptions) {\n      if (state.active) {\n        return this;\n      }\n\n      updateTabbableNodes();\n      state.active = true;\n      state.paused = false;\n      state.nodeFocusedBeforeActivation = doc.activeElement;\n      var onActivate = activateOptions && activateOptions.onActivate ? activateOptions.onActivate : config.onActivate;\n\n      if (onActivate) {\n        onActivate();\n      }\n\n      addListeners();\n      return this;\n    },\n    deactivate: function deactivate(deactivateOptions) {\n      if (!state.active) {\n        return this;\n      }\n\n      clearTimeout(activeFocusDelay);\n      removeListeners();\n      state.active = false;\n      state.paused = false;\n      activeFocusTraps.deactivateTrap(trap);\n      var onDeactivate = deactivateOptions && deactivateOptions.onDeactivate !== undefined ? deactivateOptions.onDeactivate : config.onDeactivate;\n\n      if (onDeactivate) {\n        onDeactivate();\n      }\n\n      var returnFocus = deactivateOptions && deactivateOptions.returnFocus !== undefined ? deactivateOptions.returnFocus : config.returnFocusOnDeactivate;\n\n      if (returnFocus) {\n        delay(function () {\n          tryFocus(getReturnFocusNode(state.nodeFocusedBeforeActivation));\n        });\n      }\n\n      return this;\n    },\n    pause: function pause() {\n      if (state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = true;\n      removeListeners();\n      return this;\n    },\n    unpause: function unpause() {\n      if (!state.paused || !state.active) {\n        return this;\n      }\n\n      state.paused = false;\n      updateTabbableNodes();\n      addListeners();\n      return this;\n    },\n    updateContainerElements: function updateContainerElements(containerElements) {\n      var elementsAsArray = [].concat(containerElements).filter(Boolean);\n      state.containers = elementsAsArray.map(function (element) {\n        return typeof element === 'string' ? doc.querySelector(element) : element;\n      });\n\n      if (state.active) {\n        updateTabbableNodes();\n      }\n\n      return this;\n    }\n  }; // initialize container elements\n\n  trap.updateContainerElements(elements);\n  return trap;\n};\n\nexport { createFocusTrap };\n//# sourceMappingURL=focus-trap.esm.js.map\n","/*!\n* tabbable 5.1.6\n* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE\n*/\nvar candidateSelectors = ['input', 'select', 'textarea', 'a[href]', 'button', '[tabindex]', 'audio[controls]', 'video[controls]', '[contenteditable]:not([contenteditable=\"false\"])', 'details>summary:first-of-type', 'details'];\nvar candidateSelector = /* #__PURE__ */candidateSelectors.join(',');\nvar matches = typeof Element === 'undefined' ? function () {} : Element.prototype.matches || Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\n\nvar getCandidates = function getCandidates(el, includeContainer, filter) {\n  var candidates = Array.prototype.slice.apply(el.querySelectorAll(candidateSelector));\n\n  if (includeContainer && matches.call(el, candidateSelector)) {\n    candidates.unshift(el);\n  }\n\n  candidates = candidates.filter(filter);\n  return candidates;\n};\n\nvar isContentEditable = function isContentEditable(node) {\n  return node.contentEditable === 'true';\n};\n\nvar getTabindex = function getTabindex(node) {\n  var tabindexAttr = parseInt(node.getAttribute('tabindex'), 10);\n\n  if (!isNaN(tabindexAttr)) {\n    return tabindexAttr;\n  } // Browsers do not return `tabIndex` correctly for contentEditable nodes;\n  // so if they don't have a tabindex attribute specifically set, assume it's 0.\n\n\n  if (isContentEditable(node)) {\n    return 0;\n  } // in Chrome, <details/>, <audio controls/> and <video controls/> elements get a default\n  //  `tabIndex` of -1 when the 'tabindex' attribute isn't specified in the DOM,\n  //  yet they are still part of the regular tab order; in FF, they get a default\n  //  `tabIndex` of 0; since Chrome still puts those elements in the regular tab\n  //  order, consider their tab index to be 0.\n\n\n  if ((node.nodeName === 'AUDIO' || node.nodeName === 'VIDEO' || node.nodeName === 'DETAILS') && node.getAttribute('tabindex') === null) {\n    return 0;\n  }\n\n  return node.tabIndex;\n};\n\nvar sortOrderedTabbables = function sortOrderedTabbables(a, b) {\n  return a.tabIndex === b.tabIndex ? a.documentOrder - b.documentOrder : a.tabIndex - b.tabIndex;\n};\n\nvar isInput = function isInput(node) {\n  return node.tagName === 'INPUT';\n};\n\nvar isHiddenInput = function isHiddenInput(node) {\n  return isInput(node) && node.type === 'hidden';\n};\n\nvar isDetailsWithSummary = function isDetailsWithSummary(node) {\n  var r = node.tagName === 'DETAILS' && Array.prototype.slice.apply(node.children).some(function (child) {\n    return child.tagName === 'SUMMARY';\n  });\n  return r;\n};\n\nvar getCheckedRadio = function getCheckedRadio(nodes, form) {\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i].checked && nodes[i].form === form) {\n      return nodes[i];\n    }\n  }\n};\n\nvar isTabbableRadio = function isTabbableRadio(node) {\n  if (!node.name) {\n    return true;\n  }\n\n  var radioScope = node.form || node.ownerDocument;\n\n  var queryRadios = function queryRadios(name) {\n    return radioScope.querySelectorAll('input[type=\"radio\"][name=\"' + name + '\"]');\n  };\n\n  var radioSet;\n\n  if (typeof window !== 'undefined' && typeof window.CSS !== 'undefined' && typeof window.CSS.escape === 'function') {\n    radioSet = queryRadios(window.CSS.escape(node.name));\n  } else {\n    try {\n      radioSet = queryRadios(node.name);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error('Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s', err.message);\n      return false;\n    }\n  }\n\n  var checked = getCheckedRadio(radioSet, node.form);\n  return !checked || checked === node;\n};\n\nvar isRadio = function isRadio(node) {\n  return isInput(node) && node.type === 'radio';\n};\n\nvar isNonTabbableRadio = function isNonTabbableRadio(node) {\n  return isRadio(node) && !isTabbableRadio(node);\n};\n\nvar isHidden = function isHidden(node) {\n  if (getComputedStyle(node).visibility === 'hidden') {\n    return true;\n  }\n\n  var isDirectSummary = matches.call(node, 'details>summary:first-of-type');\n  var nodeUnderDetails = isDirectSummary ? node.parentElement : node;\n\n  if (matches.call(nodeUnderDetails, 'details:not([open]) *')) {\n    return true;\n  }\n\n  while (node) {\n    if (getComputedStyle(node).display === 'none') {\n      return true;\n    }\n\n    node = node.parentElement;\n  }\n\n  return false;\n};\n\nvar isNodeMatchingSelectorFocusable = function isNodeMatchingSelectorFocusable(node) {\n  if (node.disabled || isHiddenInput(node) || isHidden(node) ||\n  /* For a details element with a summary, the summary element gets the focused  */\n  isDetailsWithSummary(node)) {\n    return false;\n  }\n\n  return true;\n};\n\nvar isNodeMatchingSelectorTabbable = function isNodeMatchingSelectorTabbable(node) {\n  if (!isNodeMatchingSelectorFocusable(node) || isNonTabbableRadio(node) || getTabindex(node) < 0) {\n    return false;\n  }\n\n  return true;\n};\n\nvar tabbable = function tabbable(el, options) {\n  options = options || {};\n  var regularTabbables = [];\n  var orderedTabbables = [];\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorTabbable);\n  candidates.forEach(function (candidate, i) {\n    var candidateTabindex = getTabindex(candidate);\n\n    if (candidateTabindex === 0) {\n      regularTabbables.push(candidate);\n    } else {\n      orderedTabbables.push({\n        documentOrder: i,\n        tabIndex: candidateTabindex,\n        node: candidate\n      });\n    }\n  });\n  var tabbableNodes = orderedTabbables.sort(sortOrderedTabbables).map(function (a) {\n    return a.node;\n  }).concat(regularTabbables);\n  return tabbableNodes;\n};\n\nvar focusable = function focusable(el, options) {\n  options = options || {};\n  var candidates = getCandidates(el, options.includeContainer, isNodeMatchingSelectorFocusable);\n  return candidates;\n};\n\nvar isTabbable = function isTabbable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, candidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorTabbable(node);\n};\n\nvar focusableCandidateSelector = /* #__PURE__ */candidateSelectors.concat('iframe').join(',');\n\nvar isFocusable = function isFocusable(node) {\n  if (!node) {\n    throw new Error('No node provided');\n  }\n\n  if (matches.call(node, focusableCandidateSelector) === false) {\n    return false;\n  }\n\n  return isNodeMatchingSelectorFocusable(node);\n};\n\nexport { focusable, isFocusable, isTabbable, tabbable };\n//# sourceMappingURL=index.esm.js.map\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as e}from\"../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{messageBundle as o}from\"../widgets/support/decorators/messageBundle.js\";import{renderable as i}from\"../widgets/support/decorators/renderable.js\";import{j as r}from\"../chunks/index.js\";import{isWidget as a}from\"../widgets/support/widget.js\";import n from\"../widgets/Widget.js\";import{createFocusTrap as c}from\"focus-trap\";const d=\"esri-identity-modal\",l=\"esri-identity-modal--open\",p=\"esri-identity-modal--closed\",u=\"esri-identity-modal__title\",m=\"esri-identity-modal__dialog\",h=\"esri-identity-modal__content\",_=\"esri-identity-modal__close-button\",y=\"esri-icon-close\";let g=class extends n{constructor(t,e){super(t,e),this.container=document.createElement(\"div\"),this.content=null,this.open=!1,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.own(this.watch(\"open\",(()=>this._toggleFocusTrap())))}destroy(){this._destroyFocusTrap()}render(){const t=this.id,{open:e,content:s,title:o,messages:i}=this,a=e&&!!s,n={[l]:a,[p]:!a},c=r(\"button\",{class:_,\"aria-label\":i.close,title:i.close,bind:this,onclick:this._close},r(\"span\",{\"aria-hidden\":\"true\",class:y})),h=`${t}_title`,g=`${t}_content`,f=o?r(\"h1\",{id:h,class:u},o):null,v=a?r(\"div\",{bind:this,class:m,role:\"dialog\",\"aria-labelledby\":h,\"aria-describedby\":g,afterCreate:this._createFocusTrap},c,f,this._renderContent(g)):null;return r(\"div\",{tabIndex:-1,class:this.classes(d,n)},v)}_destroyFocusTrap(){var t;null==(t=this._focusTrap)||t.deactivate({onDeactivate:null}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:t,open:e}=this;t&&(e?t.activate():t.deactivate())}_createFocusTrap(t){this._destroyFocusTrap(),requestAnimationFrame((()=>{this._focusTrap=c(t,{initialFocus:\"input\",onDeactivate:this._close}),this._toggleFocusTrap()}))}_renderContent(t){const e=this.content;return\"string\"==typeof e?r(\"div\",{class:h,id:t,innerHTML:e}):a(e)?r(\"div\",{class:h,id:t},e.render()):e instanceof HTMLElement?r(\"div\",{class:h,id:t,bind:e,afterCreate:this._attachToNode}):null}_attachToNode(t){t.appendChild(this)}};t([e({readOnly:!0})],g.prototype,\"container\",void 0),t([e(),i()],g.prototype,\"content\",void 0),t([e(),i()],g.prototype,\"open\",void 0),t([e(),i(),o(\"esri/t9n/common\")],g.prototype,\"messages\",void 0),t([e({aliasOf:\"messages.auth.signIn\"}),i()],g.prototype,\"title\",void 0),g=t([s(\"esri.identity.IdentityModal\")],g);var f=g;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e){this.oAuthInfo=null,this.storage=null,this.appId=null,this.expires=null,this.ssl=null,this.token=null,this.userId=null,this.oAuthInfo=t,this.storage=e,this._init()}isValid(){let t=!1;if(this.oAuthInfo&&this.token&&this.userId){const e=Date.now();if(this.expires>e){(this.expires-e)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(t=!0)}}return t}save(){if(!this.storage)return;const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s||(s=t[e.authNamespace]={}),s[e.portalUrl]={appId:this.appId=e.appId,expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}destroy(){const t=this._load(),e=this.oAuthInfo;if(e&&e.appId&&e.portalUrl&&this.token&&this.expires>Date.now()){const t=e.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/rest/oauth2/revokeToken\",s=new FormData;if(s.append(\"f\",\"json\"),s.append(\"auth_token\",this.token),s.append(\"client_id\",e.appId),s.append(\"token_type_hint\",\"access_token\"),\"function\"==typeof navigator.sendBeacon)navigator.sendBeacon(t,s);else{const e=new XMLHttpRequest;e.open(\"POST\",t),e.send(s)}}if(e&&e.authNamespace&&e.portalUrl&&this.storage){const s=t[e.authNamespace];if(s){delete s[e.portalUrl];try{this.storage.setItem(\"esriJSAPIOAuth\",JSON.stringify(t))}catch(t){console.log(t)}}}e&&(e._oAuthCred=null,this.oAuthInfo=null)}_init(){const t=this._load(),e=this.oAuthInfo;if(e&&e.authNamespace&&e.portalUrl){let s=t[e.authNamespace];s&&(s=s[e.portalUrl],s&&(this.appId=s.appId,this.expires=s.expires,this.ssl=s.ssl,this.token=s.token,this.userId=s.userId))}}_load(){let t={};if(this.storage){const e=this.storage.getItem(\"esriJSAPIOAuth\");if(e)try{t=JSON.parse(e)}catch(t){console.log(t)}}return t}}t.prototype.declaredClass=\"esri.identity.OAuthCredential\";export default t;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as r}from\"../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as e}from\"../core/JSONSupport.js\";var p;let s=p=class extends e{constructor(o){super(o),this._oAuthCred=null,this.appId=null,this.authNamespace=\"/\",this.expiration=20160,this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl=\"oauth-callback.html\",this.popupWindowFeatures=\"height=490,width=800,resizable,scrollbars,status\",this.portalUrl=\"https://www.arcgis.com\",this.preserveUrlHash=!1,this.userId=null}clone(){return p.fromJSON(this.toJSON())}};o([r({json:{write:!0}})],s.prototype,\"appId\",void 0),o([r({json:{write:!0}})],s.prototype,\"authNamespace\",void 0),o([r({json:{write:!0}})],s.prototype,\"expiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceLogin\",void 0),o([r({json:{write:!0}})],s.prototype,\"forceUserId\",void 0),o([r({json:{write:!0}})],s.prototype,\"locale\",void 0),o([r({json:{write:!0}})],s.prototype,\"minTimeUntilExpiration\",void 0),o([r({json:{write:!0}})],s.prototype,\"popup\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupCallbackUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"popupWindowFeatures\",void 0),o([r({json:{write:!0}})],s.prototype,\"portalUrl\",void 0),o([r({json:{write:!0}})],s.prototype,\"preserveUrlHash\",void 0),o([r({json:{write:!0}})],s.prototype,\"userId\",void 0),s=p=o([t(\"esri.identity.OAuthInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{JSONSupport as t}from\"../core/JSONSupport.js\";let s=class extends t{constructor(r){super(r),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};r([o({json:{write:!0}})],s.prototype,\"adminTokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"currentVersion\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasPortal\",void 0),r([o({json:{write:!0}})],s.prototype,\"hasServer\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningSystemUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"owningTenant\",void 0),r([o({json:{write:!0}})],s.prototype,\"server\",void 0),r([o({json:{write:!0}})],s.prototype,\"shortLivedTokenValidity\",void 0),r([o({json:{write:!0}})],s.prototype,\"tokenServiceUrl\",void 0),r([o({json:{write:!0}})],s.prototype,\"webTierAuth\",void 0),s=r([e(\"esri.identity.ServerInfo\")],s);var i=s;export default i;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/global.js\";import\"../core/has.js\";import{mixin as r,fixJson as s}from\"../core/lang.js\";import{getDeepValue as i}from\"../core/object.js\";import n from\"../config.js\";import{escapeRegExpString as o}from\"../core/string.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import l from\"../core/Error.js\";import{Url as c,hasSameOrigin as d,queryToObject as u,normalize as p,urlToObject as _,getProxyRule as f,makeAbsolute as g,objectToQuery as m}from\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{on as v}from\"../core/events.js\";import{createAbortController as S,createResolver as w,onAbort as I,isAborted as k,resolve as A}from\"../core/promiseUtils.js\";import U from\"../core/Evented.js\";import{id as y}from\"../kernel.js\";import x from\"../request.js\";import{writeCookie as T}from\"../core/cookie.js\";import R from\"./IdentityForm.js\";import O from\"./IdentityModal.js\";import C from\"./OAuthCredential.js\";import P from\"./OAuthInfo.js\";import b from\"./ServerInfo.js\";const D={},j=e=>{const t=new c(e.owningSystemUrl).host,r=new c(e.server).host,s=/.+\\.arcgis\\.com$/i;return s.test(t)&&s.test(r)},q=(e,t)=>!!(j(e)&&t&&t.some((t=>t.test(e.server))));let E=class extends U{constructor(){super(),this._portalConfig=t.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this.defaultOAuthInfo=null,this.defaultTokenValidity=60,this.dialog=null,this.formConstructor=R,this.tokenValidity=null,this.signInPage=null,this.useSignInPage=!0,this.normalizeWebTierAuth=!1,this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthHash=null,this._gwTokenUrl=\"/sharing/rest/generateToken\",this._agsRest=\"/rest/services\",this._agsPortal=/\\/sharing(\\/|$)/i,this._agsAdmin=/(https?:\\/\\/[^\\/]+\\/[^\\/]+)\\/admin\\/?(\\/.*)?$/i,this._adminSvcs=/\\/rest\\/admin\\/services(\\/|$)/i,this._gwDomains=[{regex:/^https?:\\/\\/www\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:dev|[a-z\\d-]+\\.mapsdev)\\.arcgis\\.com/i,customBaseUrl:\"mapsdev.arcgis.com\",tokenServiceUrl:\"https://dev.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:devext|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,customBaseUrl:\"mapsdevext.arcgis.com\",tokenServiceUrl:\"https://devext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/(?:qaext|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i,customBaseUrl:\"mapsqa.arcgis.com\",tokenServiceUrl:\"https://qaext.arcgis.com/sharing/rest/generateToken\"},{regex:/^https?:\\/\\/[a-z\\d-]+\\.maps\\.arcgis\\.com/i,customBaseUrl:\"maps.arcgis.com\",tokenServiceUrl:\"https://www.arcgis.com/sharing/rest/generateToken\"}],this._legacyFed=[],this._regexSDirUrl=/http.+\\/rest\\/services\\/?/gi,this._regexServerType=/(\\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|MapServer|MobileServer|NAServer|NetworkDiagramServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer)).*/gi,this._gwUser=/http.+\\/users\\/([^\\/]+)\\/?.*/i,this._gwItem=/http.+\\/items\\/([^\\/]+)\\/?.*/i,this._gwGroup=/http.+\\/groups\\/([^\\/]+)\\/?.*/i,this._rePortalTokenSvc=/\\/sharing(\\/rest)?\\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthHash(),window.addEventListener(\"pageshow\",(e=>{this._pageShowHandler(e)}))}registerServers(e){const t=this.serverInfos;t?(e=e.filter((e=>!this.findServerInfo(e.server))),this.serverInfos=t.concat(e)):this.serverInfos=e,e.forEach((e=>{e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal&&this._portals.push(e.server)}))}registerOAuthInfos(e){const t=this.oAuthInfos;t?(e=e.filter((e=>!this.findOAuthInfo(e.portalUrl))),this.oAuthInfos=t.concat(e)):this.oAuthInfos=e}registerToken(e){e={...e};const t=this._sanitizeUrl(e.server),s=this._isServerRsrc(t);let i,n=this.findServerInfo(t),o=!0;n||(n=new b,n.server=this._getServerInstanceRoot(t),s?n.hasServer=!0:(n.tokenServiceUrl=this._getTokenSvcUrl(t),n.hasPortal=!0),this.registerServers([n])),i=this._findCredential(t),i?(delete e.server,r(i,e),o=!1):(i=new L({userId:e.userId,server:n.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:s?\"server\":\"portal\"}),i.resources=[t],this.credentials.push(i)),i.emitTokenChange(!1),o||i.refreshServerTokens()}toJSON(){return s({serverInfos:this.serverInfos.map((e=>e.toJSON())),oAuthInfos:this.oAuthInfos.map((e=>e.toJSON())),credentials:this.credentials.map((e=>e.toJSON()))})}initialize(e){if(!e)return;\"string\"==typeof e&&(e=JSON.parse(e));const t=e.serverInfos,r=e.oAuthInfos,s=e.credentials;if(t){const e=[];t.forEach((t=>{t.server&&t.tokenServiceUrl&&e.push(t.declaredClass?t:new b(t))})),e.length&&this.registerServers(e)}if(r){const e=[];r.forEach((t=>{t.appId&&e.push(t.declaredClass?t:new P(t))})),e.length&&this.registerOAuthInfos(e)}s&&s.forEach((e=>{e.server&&e.token&&e.expires&&e.expires>Date.now()&&((e=e.declaredClass?e:new L(e)).emitTokenChange(),this.credentials.push(e))}))}findServerInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.serverInfos)if(this._hasSameServerInstance(r.server,e)){t=r;break}return t}findOAuthInfo(e){let t;e=this._sanitizeUrl(e);for(const r of this.oAuthInfos)if(this._hasSameServerInstance(r.portalUrl,e)){t=r;break}return t}findCredential(e,t){let r,s;if(e=this._sanitizeUrl(e),s=this._isServerRsrc(e)?\"server\":\"portal\",t){for(const i of this.credentials)if(this._hasSameServerInstance(i.server,e)&&t===i.userId&&i.scope===s){r=i;break}}else for(const t of this.credentials)if(this._hasSameServerInstance(t.server,e)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===s){r=t;break}return r}getCredential(e,t){let r,s,i=!0;t&&(r=!!t.token,s=t.error,i=!1!==t.prompt),t={...t},e=this._sanitizeUrl(e);const n=S(),o=w();if(t.signal&&I(t.signal,(()=>{n.abort()})),I(n,(()=>{o.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))})),k(n))return o.promise;t.signal=n.signal;const a=this._isAdminResource(e),h=r&&this._doPortalSignIn(e)?this._getEsriAuthCookie():null,c=r?this.findCredential(e):null;let d;if(c&&s&&s.details&&498===s.details.httpStatus)c.destroy(),h&&h.token===t.token&&(T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:document.domain}),window.location.hostname.endsWith(\".arcgis.com\")&&T(\"esri_auth\",null,{expires:-1,path:\"/\",domain:\"arcgis.com\"}));else if(h||c){const t=h&&h.email||c&&c.userId;return d=new l(\"identity-manager:not-authorized\",\"You are currently signed in as: '\"+t+\"'. You do not have access to this resource: \"+e,{error:s}),o.reject(d),o.promise}const u=this._findCredential(e,t);if(u)return o.resolve(u),o.promise;let p=this.findServerInfo(e);if(p)!p.hasServer&&this._isServerRsrc(e)&&(p._restInfoPms=this._getTokenSvcUrl(e),p.hasServer=!0);else{const t=this._getTokenSvcUrl(e);if(!t)return d=new l(\"identity-manager:unknown-resource\",\"Unknown resource - could not find token service endpoint.\"),o.reject(d),o.promise;p=new b,p.server=this._getServerInstanceRoot(e),\"string\"==typeof t?(p.tokenServiceUrl=t,p.hasPortal=!0):(p._restInfoPms=t,p.hasServer=!0),this.registerServers([p])}return i&&p.hasPortal&&void 0===p._selfReq&&!this._findOAuthInfo(e)&&(p._selfReq={owningTenant:t&&t.owningTenant,selfDfd:this._getPortalSelf(p.tokenServiceUrl.replace(this._rePortalTokenSvc,\"/sharing/rest/portals/self\"),e)}),this._enqueue(e,p,t,o,a)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"\")||\"\":this._gwUser.test(e)&&e.replace(this._gwUser,\"$1\")||this._gwItem.test(e)&&e.replace(this._gwItem,\"$1\")||this._gwGroup.test(e)&&e.replace(this._gwGroup,\"$1\")||\"\"}generateToken(e,t,s){const i=this._rePortalTokenSvc.test(e.tokenServiceUrl),n=new c(window.location.href.toLowerCase()),o=this._getEsriAuthCookie(),a=e.shortLivedTokenValidity;let h,u,p,_,f,g,m,v,S,w;t&&(w=this.tokenValidity||a||this.defaultTokenValidity,w>a&&a>0&&(w=a)),s&&(u=s.isAdmin,p=s.serverUrl,_=s.token,m=s.signal,v=s.ssl,e.customParameters=s.customParameters),u?f=e.adminTokenServiceUrl:(f=e.tokenServiceUrl,g=new c(f.toLowerCase()),o&&(h=o.auth_tier,h=h&&h.toLowerCase()),(\"web\"===h||e.webTierAuth)&&s&&s.serverUrl&&!v&&\"http\"===n.scheme&&(d(n.uri,f,!0)||\"https\"===g.scheme&&n.host===g.host&&\"7080\"===n.port&&\"7443\"===g.port)&&(f=f.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"))),S=r({query:r({request:\"getToken\",username:t&&t.username,password:t&&t.password,serverUrl:p,token:_,expiration:w,referer:u||i?window.location.host:null,client:u?\"referer\":null,f:\"json\"},e.customParameters),method:\"post\",authMode:\"anonymous\",useProxy:this._useProxy(e,s),signal:m},s&&s.ioArgs),i||(S.withCredentials=!1);return x(f,S).then((r=>{const s=r.data;if(!s||!s.token)return new l(\"identity-manager:authentication-failed\",\"Unable to generate token\");const i=e.server;return D[i]||(D[i]={}),t&&(D[i][t.username]=t.password),s.validity=w,s}))}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,\"\").then((e=>e.credential))}checkAppAccess(e,t,r){let s=!1;return this.getCredential(e,{prompt:!1}).then((i=>{let n;const o={f:\"json\"};if(\"portal\"===i.scope)if(t&&(this._doPortalSignIn(e,!0)||r&&r.force))n=i.server+\"/sharing/rest/oauth2/validateAppAccess\",o.client_id=t;else{if(!i.token)return{credential:i};n=i.server+\"/sharing/rest\"}else{if(!i.token)return{credential:i};n=i.server+\"/rest/services\"}return i.token&&(o.token=i.token),x(n,{query:o,authMode:\"anonymous\"}).then((e=>{if(!1===e.data.valid)throw new l(\"identity-manager:not-authorized\",`You are currently signed in as: '${i.userId}'.`,e.data);return s=!!e.data.viewOnlyUserTypeApp,{credential:i}})).catch((e=>{if(\"identity-manager:not-authorized\"===e.name)throw e;const t=e.details&&e.details.httpStatus;if(498===t)throw i.destroy(),new l(\"identity-manager:not-authenticated\",\"User is not signed in.\");if(400===t)throw new l(\"identity-manager:invalid-request\");return{credential:i}}))})).then((e=>({credential:e.credential,viewOnly:s})))}setOAuthResponseHash(e){var t;const r=this._oAuthDfd;if(this._oAuthDfd=null,!r||!e)return;clearInterval(this._oAuthIntervalId),null==(t=this._oAuthOnHashHandle)||t.remove(),\"#\"===e.charAt(0)&&(e=e.substring(1));const s=u(e);if(s.error){const e=\"access_denied\"===s.error,t=new l(e?\"identity-manager:user-aborted\":\"identity-manager:authentication-failed\",e?\"ABORTED\":\"OAuth: \"+s.error+\" - \"+s.error_description);r.reject(t)}else{const e=r.sinfo_,t=r.oinfo_,i=t._oAuthCred,n=new L({userId:s.username,server:e.server,token:s.access_token,expires:Date.now()+1e3*Number(s.expires_in),ssl:\"true\"===s.ssl,_oAuthCred:i});t.userId=n.userId,i.storage=s.persist?window.localStorage:window.sessionStorage,i.token=n.token,i.expires=n.expires,i.userId=n.userId,i.ssl=n.ssl,i.save(),r.resolve(n)}}setRedirectionHandler(e){this._redirectFunc=e}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,t,r={}){const s=w(),i=()=>{var e,t,r,s,i;null==(e=a)||e.remove(),null==(t=h)||t.remove(),null==(r=c)||r.remove(),null==(s=o)||s.destroy(),null==(i=this.dialog)||i.destroy(),this.dialog=o=a=h=c=null},n=()=>{i(),this._oAuthDfd=null,s.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))};r.signal&&I(r.signal,(()=>{n()}));let o=new this.formConstructor;o.resource=this.getResourceName(e),o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");let a=o.on(\"cancel\",n),h=this.dialog.watch(\"open\",n),c=o.on(\"submit\",(e=>{this.generateToken(t,e,{isAdmin:r.isAdmin,signal:r.signal}).then((n=>{i();const o=new L({userId:e.username,server:t.server,token:n.token,expires:null!=n.expires?Number(n.expires):null,ssl:!!n.ssl,isAdmin:r.isAdmin,validity:n.validity});s.resolve(o)})).catch((e=>{o.error=e,o.signingIn=!1}))}));return s.promise}oAuthSignIn(e,t,r,s){this._oAuthDfd=w();const i=this._oAuthDfd;null!=s&&s.signal&&I(s.signal,(()=>{const e=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;e&&!e.closed?e.close():this.dialog&&a()})),i.resUrl_=e,i.sinfo_=t,i.oinfo_=r;const n=!s||!1!==s.oAuthPopupConfirmation;if(!r.popup||!n)return this._doOAuthSignIn(e,t,r),i.promise;const o=new this.formConstructor;o.oAuthPrompt=!0,o.server=t.server,this.dialog=new O,this.dialog.content=o,this.dialog.open=!0,this.emit(\"dialog-create\");const a=()=>{u(),this._oAuthDfd=null,i.reject(new l(\"identity-manager:user-aborted\",\"ABORTED\"))},h=o.on(\"cancel\",a),c=this.dialog.watch(\"open\",a),d=o.on(\"submit\",(()=>{u(),this._doOAuthSignIn(e,t,r)})),u=()=>{h.remove(),c.remove(),d.remove(),o.destroy(),this.dialog.destroy(),this.dialog=null};return i.promise}destroyCredentials(){if(this.credentials){this.credentials.slice().forEach((e=>{e.destroy()}))}this.emit(\"credentials-destroy\")}_getOAuthHash(){let e=window.location.hash;if(e){\"#\"===e.charAt(0)&&(e=e.substring(1));const t=u(e);let r=!1;t.access_token&&t.expires_in&&t.state&&t.hasOwnProperty(\"username\")?(t.state=JSON.parse(t.state),this._oAuthHash=t,r=!0):t.error&&t.error_description&&(console.log(\"IdentityManager OAuth Error: \",t.error,\" - \",t.error_description),\"access_denied\"===t.error&&(r=!0)),r&&(window.location.hash=\"object\"==typeof t.state&&t.state.hash||\"\")}}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const e=new l(\"identity-manager:user-aborted\",\"ABORTED\");this._errbackFunc(e)}}_findCredential(e,t){let r,s,i,n,o=-1;const a=t&&t.token,h=t&&t.resource,l=this._isServerRsrc(e)?\"server\":\"portal\",c=this.credentials.filter((t=>this._hasSameServerInstance(t.server,e)&&t.scope===l));if(e=h||e,c.length)if(1===c.length){if(r=c[0],n=this.findServerInfo(r.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,r.userId),o=this._getIdenticalSvcIdx(e,r),!a)return-1===o&&r.resources.push(e),this._addResource(e,i),r;-1!==o&&(r.resources.splice(o,1),this._removeResource(e,i))}else{let t,r;if(c.some((a=>(r=this._getIdenticalSvcIdx(e,a),-1!==r&&(t=a,n=this.findServerInfo(t.server),s=n&&n.owningSystemUrl,i=s&&this.findCredential(s,t.userId),o=r,!0)))),a)t&&(t.resources.splice(o,1),this._removeResource(e,i));else if(t)return this._addResource(e,i),t}}_findOAuthInfo(e){let t=this.findOAuthInfo(e);if(!t)for(const r of this.oAuthInfos)if(this._isIdProvider(r.portalUrl,e)){t=r;break}return t}_addResource(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)}_removeResource(e,t){let r=-1;t&&(r=this._getIdenticalSvcIdx(e,t),r>-1&&t.resources.splice(r,1))}_useProxy(e,t){return t&&t.isAdmin&&!d(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&\"10.1\"===String(e.currentVersion)&&!d(e.tokenServiceUrl,window.location.href)}_getOrigin(e){const t=new c(e);return t.scheme+\"://\"+t.host+(null!=t.port?\":\"+t.port:\"\")}_getServerInstanceRoot(e){const t=e.toLowerCase();let r=t.indexOf(this._agsRest);return-1===r&&this._isAdminResource(e)&&(r=this._agsAdmin.test(e)?e.replace(this._agsAdmin,\"$1\").length:e.search(this._adminSvcs)),-1===r&&(r=t.indexOf(\"/sharing\")),-1===r&&\"/\"===t.substr(-1)&&(r=t.length-1),r>-1?e.substring(0,r):e}_hasSameServerInstance(e,t){return\"/\"===e.substr(-1)&&(e=e.slice(0,-1)),e=e.toLowerCase(),t=this._getServerInstanceRoot(t).toLowerCase(),e=this._normalizeAGOLorgDomain(e),t=this._normalizeAGOLorgDomain(t),(e=e.substr(e.indexOf(\":\")))===(t=t.substr(t.indexOf(\":\")))}_normalizeAGOLorgDomain(e){const t=/^https?:\\/\\/(?:cdn|[a-z\\d-]+\\.maps)\\.arcgis\\.com/i,r=/^https?:\\/\\/(?:cdndev|[a-z\\d-]+\\.mapsdevext)\\.arcgis\\.com/i,s=/^https?:\\/\\/(?:cdnqa|[a-z\\d-]+\\.mapsqa)\\.arcgis\\.com/i;return t.test(e)?e=e.replace(t,\"https://www.arcgis.com\"):r.test(e)?e=e.replace(r,\"https://devext.arcgis.com\"):s.test(e)&&(e=e.replace(s,\"https://qaext.arcgis.com\")),e}_sanitizeUrl(e){const t=(n.request.proxyUrl||\"\").toLowerCase(),r=t?e.toLowerCase().indexOf(t+\"?\"):-1;return-1!==r&&(e=e.substring(r+t.length+1)),e=p(e),_(e).path}_isRESTService(e){return e.indexOf(this._agsRest)>-1}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,t){let r;if(this._isRESTService(e)&&this._isRESTService(t)){const s=this._getSuffix(e).toLowerCase(),i=this._getSuffix(t).toLowerCase();if(r=s===i,!r){const e=/(.*)\\/(MapServer|FeatureServer).*/gi;r=s.replace(e,\"$1\")===i.replace(e,\"$1\")}}else this._isAdminResource(e)&&this._isAdminResource(t)?r=!0:this._isServerRsrc(e)||this._isServerRsrc(t)||!this._isPortalDomain(e)||(r=!0);return r}_isPortalDomain(e){const t=new c(e.toLowerCase()),r=this._portalConfig;let s=this._gwDomains.some((e=>e.regex.test(t.uri)));return!s&&r&&(s=this._hasSameServerInstance(this._getServerInstanceRoot(r.restBaseUrl),t.uri)),s||n.portalUrl&&(s=d(t,n.portalUrl,!0)),s||(s=this._portals.some((e=>this._hasSameServerInstance(e,t.uri)))),s=s||this._agsPortal.test(t.path),s}_isIdProvider(e,t){let r=-1,s=-1;this._gwDomains.forEach(((i,n)=>{-1===r&&i.regex.test(e)&&(r=n),-1===s&&i.regex.test(t)&&(s=n)}));let i=!1;if(r>-1&&s>-1&&(0===r||4===r?0!==s&&4!==s||(i=!0):1===r?1!==s&&2!==s||(i=!0):2===r?2===s&&(i=!0):3===r&&3===s&&(i=!0)),!i){const r=this.findServerInfo(t),s=r&&r.owningSystemUrl;s&&j(r)&&this._isPortalDomain(s)&&this._isIdProvider(e,s)&&(i=!0)}return i}_getIdenticalSvcIdx(e,t){let r=-1;for(let s=0;s<t.resources.length;s++){const i=t.resources[s];if(this._isIdenticalService(e,i)){r=s;break}}return r}_getSuffix(e){return e.replace(this._regexSDirUrl,\"\").replace(this._regexServerType,\"$1\")}_getTokenSvcUrl(e){let t,r,s;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return t=s+\"/admin/generateToken\",r=x(e=s+\"/rest/info\",{query:{f:\"json\"}}).then((e=>e.data)),{adminUrl:t,promise:r}}if(this._isPortalDomain(e)){let t=\"\";if(this._gwDomains.some((r=>(r.regex.test(e)&&(t=r.tokenServiceUrl),!!t))),t||this._portals.some((r=>(this._hasSameServerInstance(r,e)&&(t=r+this._gwTokenUrl),!!t))),t||(s=e.toLowerCase().indexOf(\"/sharing\"),-1!==s&&(t=e.substring(0,s)+this._gwTokenUrl)),t||(t=this._getOrigin(e)+this._gwTokenUrl),t){const r=new c(e).port;/^http:\\/\\//i.test(e)&&\"7080\"===r&&(t=t.replace(/:7080/i,\":7443\")),t=t.replace(/http:/i,\"https:\")}return t}if(-1!==e.toLowerCase().indexOf(\"premium.arcgisonline.com\"))return\"https://premium.arcgisonline.com/server/tokens\"}_exchangeToken(e,t,r){return x(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:\"anonymous\",method:\"post\",query:{f:\"json\",client_id:t,token:r}}).then((e=>e.data.token))}_getPortalSelf(e,t){let r;if(this._gwDomains.some((t=>(t.regex.test(e)&&(r=t.customBaseUrl),!!r))),r)return A({allSSL:!0,currentVersion:\"4.4\",customBaseUrl:r,portalMode:\"multitenant\",supportsOAuth:!0});\"https:\"===window.location.protocol?e=e.replace(/^http:/i,\"https:\").replace(/:7080/i,\":7443\"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,\"http:\").replace(/:7443/i,\":7080\"));return x(e,{query:{f:\"json\"},authMode:\"anonymous\",withCredentials:!0}).then((e=>e.data))}_hasPortalSession(){return!!this._getEsriAuthCookie()}_getEsriAuthCookie(){let e=null;if(navigator.cookieEnabled){const t=this._getAllCookies(\"esri_auth\");let r;for(let s=0;s<t.length;s++){const i=JSON.parse(t[s]);if(i.portalApp){e=i;break}r?r.push(i):r=[i]}if(!e&&r)for(const t of r)if(t.urlKey&&window.location.hostname===`${t.urlKey.toLowerCase()}.${t.customBaseUrl}`){e=t;break}}if(e){let t=null;e.expires&&(\"number\"==typeof e.expires?t=e.expires:\"string\"==typeof e.expires&&(t=Date.parse(e.expires)),isNaN(t)&&(t=null),e.expires=t),t&&t<Date.now()&&(e=null)}return e}_getAllCookies(e){const t=[],r=document.cookie.match(new RegExp(\"(?:^|; )\"+o(e)+\"=([^;]*)\",\"g\"));if(r)for(let e=0;e<r.length;e++){let s=r[e];const i=s.indexOf(\"=\");i>-1&&(s=s.substring(i+1),t.push(decodeURIComponent(s)))}return t}_doPortalSignIn(e,t){if(navigator.cookieEnabled){const r=this._getEsriAuthCookie(),s=this._portalConfig,i=window.location.href,n=this.findServerInfo(e);if((t||this.useSignInPage)&&(s||this._isPortalDomain(i)||r)&&(n?n.hasPortal||n.owningSystemUrl&&this._isPortalDomain(n.owningSystemUrl):this._isPortalDomain(e))&&(this._isIdProvider(i,e)||s&&(this._hasSameServerInstance(this._getServerInstanceRoot(s.restBaseUrl),e)||this._isIdProvider(s.restBaseUrl,e))||d(i,e,!0)))return!0}return!1}_canUsePortalSignInWorkflow(e){return this._doPortalSignIn(e)&&(window===window.top||this._hasPortalSession())}_checkProtocol(e,t,r,s){let i=!0;const n=s?t.adminTokenServiceUrl:t.tokenServiceUrl;if(0===n.trim().toLowerCase().indexOf(\"https:\")&&0!==window.location.href.toLowerCase().indexOf(\"https:\")&&f(n)&&(i=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:t}),!i)){r(new l(\"identity-manager:aborted\",\"Aborted the Sign-In process to avoid sending password over insecure connection.\"))}return i}_enqueue(e,t,r,s,i,n){return s||(s=w()),s.resUrl_=e,s.sinfo_=t,s.options_=r,s.admin_=i,s.refresh_=n,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(s)):this._xoReqs.push(s):this._doSignIn(s),s.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const t=t=>{const r=e.options_&&e.options_.resource,s=e.resUrl_,i=e.refresh_;let n=!1;-1===this.credentials.indexOf(t)&&(i&&-1!==this.credentials.indexOf(i)?(i.userId=t.userId,i.token=t.token,i.expires=t.expires,i.validity=t.validity,i.ssl=t.ssl,i.creationTime=t.creationTime,n=!0,t=i):this.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(r||s),t.scope=this._isServerRsrc(s)?\"server\":\"portal\",t.emitTokenChange();const o=this._soReqs,a={};this._soReqs=[],o.forEach((e=>{if(!this._isIdenticalService(s,e.resUrl_)){const r=this._getSuffix(e.resUrl_);a[r]||(a[r]=!0,t.resources.push(e.resUrl_))}})),e.resolve(t),o.forEach((e=>{this._hasSameServerInstance(this._getServerInstanceRoot(s),e.resUrl_)?e.resolve(t):this._soReqs.push(e)})),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,n||this.emit(\"credential-create\",{credential:t}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=t=>{e.reject(t),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},s=(s,i,n,o)=>{const a=e.sinfo_,h=!e.options_||!1!==e.options_.prompt,c=a.hasPortal&&this._findOAuthInfo(e.resUrl_);let d,u;if(this._canUsePortalSignInWorkflow(e.resUrl_)){const s=this._getEsriAuthCookie(),i=this._portalConfig;if(s){if(!a.webTierAuth){\"web\"===(s.auth_tier&&s.auth_tier.toLowerCase())&&(a.webTierAuth=!0)}return d=new L({userId:s.email,server:a.server,token:a.webTierAuth?null:s.token,expires:s.expires}),void(d.token?e._pendingDfd=this._exchangeToken(d.server,c?c.appId:\"arcgisonline\",d.token).then((e=>{d.token=e,t(d)})).catch((()=>{t(d)})):t(d))}if(h){let t=\"\";const s=window.location.href;return t=this.signInPage?this.signInPage:i?i.baseUrl+i.signin:this._isIdProvider(s,e.resUrl_)?this._getOrigin(s)+\"/home/signin.html\":a.tokenServiceUrl.replace(this._rePortalTokenSvc,\"\")+\"/home/signin.html\",t=t.replace(/http:/i,\"https:\"),i&&!1===i.useSSL&&(t=t.replace(/https:/i,\"http:\")),void(0===s.toLowerCase().replace(\"https\",\"http\").indexOf(t.toLowerCase().replace(\"https\",\"http\"))?(u=new l(\"identity-manager:unexpected-error\",\"Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: \"+e.resUrl_),r(u)):(this._rejectOnPersistedPageShow=!0,this._redirectFunc?this._redirectFunc({signInPage:t,returnUrlParamName:\"returnUrl\",returnUrl:s,resourceUrl:e.resUrl_,serverInfo:a}):window.location.href=t+\"?returnUrl=\"+encodeURIComponent(s)))}u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)}else if(s)t(new L({userId:s,server:a.server,token:n,expires:null!=o?Number(o):null,ssl:!!i}));else if(c){let s=c._oAuthCred;if(!s){const e=new C(c,window.localStorage),t=new C(c,window.sessionStorage);e.isValid()&&t.isValid()?e.expires>t.expires?(s=e,t.destroy()):(s=t,e.destroy()):s=e.isValid()?e:t,c._oAuthCred=s}if(s.isValid())d=new L({userId:s.userId,server:a.server,token:s.token,expires:s.expires,ssl:s.ssl,_oAuthCred:s}),c.appId!==s.appId&&this._doPortalSignIn(e.resUrl_,!0)?e._pendingDfd=this._exchangeToken(d.server,c.appId,d.token).then((e=>{d.token=e,s.token=e,s.save(),t(d)})).catch((()=>{t(d)})):t(d);else if(this._oAuthHash&&this._oAuthHash.state.portalUrl===c.portalUrl){const e=this._oAuthHash;d=new L({userId:e.username,server:a.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:\"true\"===e.ssl,oAuthState:e.state,_oAuthCred:s}),c.userId=d.userId,s.storage=e.persist?window.localStorage:window.sessionStorage,s.token=d.token,s.expires=d.expires,s.userId=d.userId,s.ssl=d.ssl,s.save(),this._oAuthHash=null,t(d)}else h?e._pendingDfd=this.oAuthSignIn(e.resUrl_,a,c,e.options_).then(t,r):(u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u))}else if(h){if(this._checkProtocol(e.resUrl_,a,r,e.admin_)){let s=e.options_;e.admin_&&(s=s||{},s.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,a,s).then(t,r)}}else u=new l(\"identity-manager:not-authenticated\",\"User is not signed in.\"),r(u)},n=()=>{const s=e.sinfo_,i=s.owningSystemUrl,n=e.options_;let o,a,h,l;if(n&&(o=n.token,a=n.error,h=n.prompt),l=this._findCredential(i,{token:o,resource:e.resUrl_}),!l)for(const e of this.credentials)if(this._isIdProvider(i,e.server)){l=e;break}if(l){const i=this.findCredential(e.resUrl_,l.userId);if(i)t(i);else if(q(s,this._legacyFed)){const e=l.toJSON();e.server=s.server,e.resources=null,t(new L(e))}else{(e._pendingDfd=this.generateToken(this.findServerInfo(l.server),null,{serverUrl:e.resUrl_,token:l.token,signal:e.options_.signal,ssl:l.ssl})).then((r=>{t(new L({userId:l.userId,server:s.server,token:r.token,expires:null!=r.expires?Number(r.expires):null,ssl:!!r.ssl,isAdmin:e.admin_,validity:r.validity}))}),r)}}else{this._busy=null,o&&(e.options_.token=null);(e._pendingDfd=this.getCredential(i.replace(/\\/?$/,\"/sharing\"),{resource:e.resUrl_,owningTenant:s.owningTenant,signal:e.options_.signal,token:o,error:a,prompt:h})).then((()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)}),(e=>{r(e)}))}};this._errbackFunc=r;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),h=e.sinfo_._restInfoPms;h?h.promise.then((t=>{const r=e.sinfo_;if(r._restInfoPms){r.adminTokenServiceUrl=r._restInfoPms.adminUrl,r._restInfoPms=null,r.tokenServiceUrl=i(\"authInfo.tokenServicesUrl\",t)||i(\"authInfo.tokenServiceUrl\",t)||i(\"tokenServiceUrl\",t),r.shortLivedTokenValidity=i(\"authInfo.shortLivedTokenValidity\",t),r.currentVersion=t.currentVersion,r.owningTenant=t.owningTenant;const e=r.owningSystemUrl=t.owningSystemUrl;e&&this._portals.push(e)}a&&r.owningSystemUrl?n():s()}),(()=>{e.sinfo_._restInfoPms=null;const t=new l(\"identity-manager:server-identification-failed\",\"Unknown resource - could not find token service endpoint.\");r(t)})):a&&o?n():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then((t=>{const r={};let s,i,n,o;return t&&(s=t.user&&t.user.username,r.username=s,r.allSSL=t.allSSL,i=t.supportsOAuth,n=t.currentVersion,\"multitenant\"===t.portalMode&&(o=t.customBaseUrl)),e.sinfo_.webTierAuth=!!s,s&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:r.allSSL}).catch((()=>null)).then((e=>(r.portalToken=e&&e.token,r.tokenExpiration=e&&e.expires,r))):!s&&i&&parseFloat(n)>=4.4&&!this._canUsePortalSignInWorkflow(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:o,owningTenant:e.sinfo_._selfReq.owningTenant}).catch((()=>null)).then((()=>r)):r})).catch((()=>null)).then((t=>{e.sinfo_._selfReq=null,t?s(t.username,t.allSSL,t.portalToken,t.tokenExpiration):s()})):s()}_generateOAuthInfo(e){let t,r,s=e.portalUrl;const i=e.customBaseUrl,n=e.owningTenant,o=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(o){r=window.location.href;let e=r.indexOf(\"?\");e>-1&&(r=r.slice(0,e)),e=r.search(/\\/(apps|home)\\//),r=e>-1?r.slice(0,e):null}return o&&r?(this._hasTestedIfAppIsOnPortal=!0,t=x(r+\"/sharing/rest\",{query:{f:\"json\"}}).then((()=>{this.defaultOAuthInfo=new P({appId:\"arcgisonline\",popup:!0,popupCallbackUrl:r+\"/home/oauth-callback.html\"})}))):t=A(),t.then((()=>{if(this.defaultOAuthInfo)return s=s.replace(/^http:/i,\"https:\"),x(s+\"/sharing/rest/oauth2/validateRedirectUri\",{query:{accountId:n,client_id:this.defaultOAuthInfo.appId,redirect_uri:g(this.defaultOAuthInfo.popupCallbackUrl),f:\"json\"}}).then((e=>{if(e.data.valid){const t=this.defaultOAuthInfo.clone();e.data.urlKey&&i?t.portalUrl=\"https://\"+e.data.urlKey.toLowerCase()+\".\"+i:t.portalUrl=s,this.oAuthInfos.push(t)}}))}))}_doOAuthSignIn(e,r,s){const i={portalUrl:s.portalUrl};!s.popup&&s.preserveUrlHash&&window.location.hash&&(i.hash=window.location.hash);const n={client_id:s.appId,response_type:\"token\",state:JSON.stringify(i),expiration:s.expiration,locale:s.locale,redirect_uri:s.popup?g(s.popupCallbackUrl):window.location.href.replace(/#.*$/,\"\")};s.forceLogin&&(n.force_login=!0),s.forceUserId&&s.userId&&(n.prepopulatedusername=s.userId);const o=s.portalUrl.replace(/^http:/i,\"https:\")+\"/sharing/oauth2/authorize\",a=o+\"?\"+m(n);if(s.popup){const e=window.open(a,\"esriJSAPIOAuth\",s.popupWindowFeatures);if(e)e.focus(),this._oAuthDfd.oAuthWin_=e,this._oAuthIntervalId=setInterval((()=>{if(e.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnHashHandle.remove();const e=this._oAuthDfd;if(e){const t=new l(\"identity-manager:user-aborted\",\"ABORTED\");e.reject(t)}}}),500),this._oAuthOnHashHandle=v(t,\"arcgis:auth:hash\",(e=>{this.setOAuthResponseHash(e.detail)}));else{const e=new l(\"identity-manager:popup-blocked\",\"ABORTED\");this._oAuthDfd.reject(e)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:n,authorizeUrl:o,resourceUrl:e,serverInfo:r,oAuthInfo:s}):window.location.href=a}};E=e([h(\"esri.identity.IdentityManagerBase\")],E);let L=class extends U.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],null==this.creationTime&&(this.creationTime=Date.now())}refreshToken(){const e=y.findServerInfo(this.server),t=e&&e.owningSystemUrl,r=!!t&&\"server\"===this.scope,s=r&&q(e,y._legacyFed),i=e.webTierAuth,n=i&&y.normalizeWebTierAuth,o=D[this.server],a=o&&o[this.userId];let h,l,c=this.resources&&this.resources[0],d=r&&y.findServerInfo(t),u={username:this.userId,password:a};if((!i||n)&&(r&&!d&&y.serverInfos.some((e=>(y._isIdProvider(t,e.server)&&(d=e),!!d))),h=d&&y.findCredential(d.server,this.userId),!r||h)){if(!s){if(r)l={serverUrl:c,token:h&&h.token,ssl:h&&h.ssl};else if(n)u=null,l={ssl:this.ssl};else{if(!a){let t;return c&&(c=y._sanitizeUrl(c),this._enqueued=1,t=y._enqueue(c,e,null,null,this.isAdmin,this),t.then((()=>{this._enqueued=0,this.refreshServerTokens()})).catch((()=>{this._enqueued=0}))),t}this.isAdmin&&(l={isAdmin:!0})}return y.generateToken(r?d:e,r?null:u,l).then((e=>{this.token=e.token,this.expires=null!=e.expires?Number(e.expires):null,this.creationTime=Date.now(),this.validity=e.validity,this.emitTokenChange(),this.refreshServerTokens()})).catch((()=>{}))}h.refreshToken()}}refreshServerTokens(){\"portal\"===this.scope&&y.credentials.forEach((e=>{const t=y.findServerInfo(e.server),r=t&&t.owningSystemUrl;e!==this&&e.userId===this.userId&&r&&\"server\"===e.scope&&(y._hasSameServerInstance(this.server,r)||y._isIdProvider(r,this.server))&&(q(t,y._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())}))}emitTokenChange(e){clearTimeout(this._refreshTimer);const t=this.server&&y.findServerInfo(this.server),r=t&&t.owningSystemUrl,s=r&&y.findServerInfo(r);!1===e||r&&\"portal\"!==this.scope&&(!s||!s.webTierAuth||y.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer(),this.emit(\"token-change\")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=y.credentials.indexOf(this);e>-1&&y.credentials.splice(e,1),this.emitTokenChange(),this.emit(\"destroy\")}toJSON(){const e=s({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&t.length>0&&(e.resources=t.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer;let t=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();t<0&&(t=0),this._refreshTimer=setTimeout(this.refreshToken.bind(this),t>e?t-e:t)}};e([a()],L.prototype,\"creationTime\",void 0),e([a()],L.prototype,\"expires\",void 0),e([a()],L.prototype,\"isAdmin\",void 0),e([a()],L.prototype,\"oAuthState\",void 0),e([a()],L.prototype,\"resources\",void 0),e([a()],L.prototype,\"scope\",void 0),e([a()],L.prototype,\"server\",void 0),e([a()],L.prototype,\"ssl\",void 0),e([a()],L.prototype,\"token\",void 0),e([a()],L.prototype,\"tokenRefreshBuffer\",void 0),e([a()],L.prototype,\"userId\",void 0),e([a()],L.prototype,\"validity\",void 0),L=e([h(\"esri.identity.Credential\")],L);export{L as Credential,E as IdentityManagerBase};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../chunks/tslib.es6.js\";import{subclass as e}from\"../core/accessorSupport/decorators/subclass.js\";import{setId as r}from\"../kernel.js\";import{IdentityManagerBase as t}from\"./IdentityManagerBase.js\";let o=class extends t{};o=s([e(\"esri.identity.IdentityManager\")],o);const a=new o;r(a);export default a;\n"],"sourceRoot":""}