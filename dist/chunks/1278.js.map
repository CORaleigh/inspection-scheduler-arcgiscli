{"version":3,"sources":["webpack://inspection-scheduler/./node_modules/@arcgis/core/symbols/support/previewSymbol2D.js"],"names":["u","document","createElement","p","h","d","size","f","maxSize","v","opacity","y","rotation","g","M","shape","fill","stroke","offset","width","Math","min","w","b","scale","x","k","type","e","style","t","cx","cy","r","path","command","values","symbolConfig","isSquareFill","height","a","max","n","ceil","round","src","url","text","font","s","o","getContext","l","weight","push","family","join","measureText","i","test","length","parseFloat","slice","toString","align","decoration","rotated","kerning","L","z","j","color","C","toCss","then","applyColorModulation","unshift","node"],"mappings":"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","file":"chunks/1278.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{reject as t,resolve as a}from\"../../core/promiseUtils.js\";import{pt2px as l,px2pt as n}from\"../../core/screenUtils.js\";import{getStroke as s,getFill as o,getPatternUrlWithColor as i}from\"./gfxUtils.js\";import{shapes as r,adjustColorBrightness as c}from\"./previewUtils.js\";import{renderSymbol as m}from\"./renderUtils.js\";const u=document.createElement(\"canvas\");function p(p,h){const d=null!=(null==h?void 0:h.size)?l(h.size):null,f=null!=(null==h?void 0:h.maxSize)?l(h.maxSize):null,v=null!=(null==h?void 0:h.opacity)?h.opacity:null,y=null!=(null==h?void 0:h.rotation)?h.rotation:null,g=s(p),M={shape:null,fill:null,stroke:g,offset:[0,0]};null!=g&&g.width&&(g.width=Math.min(g.width,80));const w=(null==g?void 0:g.width)||0;let b=null!=d&&(null==(null==h?void 0:h.scale)||(null==h?void 0:h.scale)),x=0,k=0;switch(p.type){case\"simple-marker\":{const e=p.style,t=Math.min(null!=d?d:l(p.size),f||120);switch(x=t,k=t,e){case\"circle\":M.shape={type:\"circle\",cx:0,cy:0,r:.5*t},b||(x+=w,k+=w);break;case\"cross\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*k]},{command:\"L\",values:[x,.5*k]},{command:\"M\",values:[.5*x,0]},{command:\"L\",values:[.5*x,k]}]};break;case\"diamond\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*k]},{command:\"L\",values:[.5*x,0]},{command:\"L\",values:[x,.5*k]},{command:\"L\",values:[.5*x,k]},{command:\"Z\",values:[]}]},b||(x+=w,k+=w);break;case\"square\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[x,0]},{command:\"L\",values:[x,k]},{command:\"L\",values:[0,k]},{command:\"Z\",values:[]}]},b||(x+=w,k+=w);break;case\"triangle\":M.shape={type:\"path\",path:[{command:\"M\",values:[.5*x,0]},{command:\"L\",values:[x,k]},{command:\"L\",values:[0,k]},{command:\"Z\",values:[]}]},b||(x+=w,k+=w);break;case\"x\":M.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[x,k]},{command:\"M\",values:[x,0]},{command:\"L\",values:[0,k]}]};break;case\"path\":M.shape={type:\"path\",path:p.path||\"\"},b||(x+=w,k+=w),b=!0}break}case\"simple-line\":{const e=Math.min(null!=d?d:w,f||80),t=e>22?2*e:40;g.width=e,x=t,k=e,M.shape={type:\"path\",path:[{command:\"M\",values:[0,k]},{command:\"L\",values:[x,k]}]};break}case\"picture-fill\":case\"simple-fill\":x=Math.min(null!=d?d:22,f||120)+w,k=x,b=!0,M.shape=\"object\"==typeof(null==h?void 0:h.symbolConfig)&&null!=h&&h.symbolConfig.isSquareFill?r.squareFill[0]:r.fill[0];break;case\"picture-marker\":{let e=l(p.width),t=l(p.height);const a=Math.max(e,t),n=e/t;e=n<=1?Math.ceil(a*n):a,t=n<=1?a:Math.ceil(a/n),x=Math.min(null!=d?d:e,f||120),k=Math.min(null!=d?d:t,f||120),M.shape={type:\"image\",x:-Math.round(x/2),y:-Math.round(k/2),width:x,height:k,src:p.url||\"\"};break}case\"text\":{const e=p,t=e.text||\"Aa\",a=e.font,s=Math.min(null!=d?d:l(a.size),f||120),o=function(e,t){const a=u.getContext(\"2d\"),l=[];return t&&(t.weight&&l.push(t.weight),t.size&&l.push(t.size+\"px\"),t.family&&l.push(t.family)),a.font=l.join(\" \"),a.measureText(e).width}(t,{weight:a.weight,size:s,family:a.family}),i=/[\\uE600-\\uE6FF]/.test(t);x=i?s:o,k=s;let r=.25*function(e){if(0===e.length)return 0;if(e.length>2){const t=n(1),a=parseFloat(e);switch(e.slice(-2)){case\"px\":return a;case\"pt\":return a*t;case\"in\":return 72*a*t;case\"pc\":return 12*a*t;case\"mm\":return 2.8346456692913384*a*t;case\"cm\":return 28.346456692913385*a*t}}return parseFloat(e)}((a?s:0).toString());i&&(r+=5),M.shape={type:\"text\",text:t,x:0,y:r,align:\"middle\",decoration:a&&a.decoration,rotated:e.rotated,kerning:e.kerning},M.font=a&&{size:s,style:a.style,decoration:a.decoration,weight:a.weight,family:a.family};break}}if(!M.shape)return t(new e(\"symbolPreview: renderPreviewHTML2D\",\"symbol not supported.\"));const L=o(p),z=L,j=p.color;let C=null;return z&&\"pattern\"===z.type&&j&&\"picture-fill\"!==p.type?C=i(z.src,j.toCss(!0)).then((e=>(z.src=e,M.fill=z,M))):(M.fill=L,C=a(M)),C.then((e=>{const t=[[e]];if(\"object\"==typeof(null==h?void 0:h.symbolConfig)&&null!=h&&h.symbolConfig.applyColorModulation){const a=.6*x;t.unshift([{...e,offset:[-a,0],fill:c(L,-.3)}]),t.push([{...e,offset:[a,0],fill:c(L,.3)}]),x+=2*a}return m(t,[x,k],{node:h&&h.node,scale:b,opacity:v,rotation:y})}))}export{p as previewSymbol2D};\n"],"sourceRoot":""}