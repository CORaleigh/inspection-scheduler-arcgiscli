(self.webpackChunkinspection_scheduler=self.webpackChunkinspection_scheduler||[]).push([[1278],{41278:(e,a,t)=>{"use strict";t.r(a),t.d(a,{previewSymbol2D:()=>r});var l=t(32656),n=t(39105),s=t(96071),i=t(26252),o=t(59126),c=t(87881);const u=document.createElement("canvas");function r(e,a){const t=null!=(null==a?void 0:a.size)?(0,s.F2)(a.size):null,r=null!=(null==a?void 0:a.maxSize)?(0,s.F2)(a.maxSize):null,m=null!=(null==a?void 0:a.opacity)?a.opacity:null,h=null!=(null==a?void 0:a.rotation)?a.rotation:null,p=(0,i.mx)(e),d={shape:null,fill:null,stroke:p,offset:[0,0]};null!=p&&p.width&&(p.width=Math.min(p.width,80));const f=(null==p?void 0:p.width)||0;let v=null!=t&&(null==(null==a?void 0:a.scale)||(null==a?void 0:a.scale)),y=0,w=0;switch(e.type){case"simple-marker":{const a=e.style,l=Math.min(null!=t?t:(0,s.F2)(e.size),r||120);switch(y=l,w=l,a){case"circle":d.shape={type:"circle",cx:0,cy:0,r:.5*l},v||(y+=f,w+=f);break;case"cross":d.shape={type:"path",path:[{command:"M",values:[0,.5*w]},{command:"L",values:[y,.5*w]},{command:"M",values:[.5*y,0]},{command:"L",values:[.5*y,w]}]};break;case"diamond":d.shape={type:"path",path:[{command:"M",values:[0,.5*w]},{command:"L",values:[.5*y,0]},{command:"L",values:[y,.5*w]},{command:"L",values:[.5*y,w]},{command:"Z",values:[]}]},v||(y+=f,w+=f);break;case"square":d.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,0]},{command:"L",values:[y,w]},{command:"L",values:[0,w]},{command:"Z",values:[]}]},v||(y+=f,w+=f);break;case"triangle":d.shape={type:"path",path:[{command:"M",values:[.5*y,0]},{command:"L",values:[y,w]},{command:"L",values:[0,w]},{command:"Z",values:[]}]},v||(y+=f,w+=f);break;case"x":d.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[y,w]},{command:"M",values:[y,0]},{command:"L",values:[0,w]}]};break;case"path":d.shape={type:"path",path:e.path||""},v||(y+=f,w+=f),v=!0}break}case"simple-line":{const e=Math.min(null!=t?t:f,r||80),a=e>22?2*e:40;p.width=e,y=a,w=e,d.shape={type:"path",path:[{command:"M",values:[0,w]},{command:"L",values:[y,w]}]};break}case"picture-fill":case"simple-fill":y=Math.min(null!=t?t:22,r||120)+f,w=y,v=!0,d.shape="object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.isSquareFill?o.JZ.squareFill[0]:o.JZ.fill[0];break;case"picture-marker":{let a=(0,s.F2)(e.width),l=(0,s.F2)(e.height);const n=Math.max(a,l),i=a/l;a=i<=1?Math.ceil(n*i):n,l=i<=1?n:Math.ceil(n/i),y=Math.min(null!=t?t:a,r||120),w=Math.min(null!=t?t:l,r||120),d.shape={type:"image",x:-Math.round(y/2),y:-Math.round(w/2),width:y,height:w,src:e.url||""};break}case"text":{const a=e,l=a.text||"Aa",n=a.font,i=Math.min(null!=t?t:(0,s.F2)(n.size),r||120),o=function(e,a){const t=u.getContext("2d"),l=[];return a&&(a.weight&&l.push(a.weight),a.size&&l.push(a.size+"px"),a.family&&l.push(a.family)),t.font=l.join(" "),t.measureText(e).width}(l,{weight:n.weight,size:i,family:n.family}),c=/[\uE600-\uE6FF]/.test(l);y=c?i:o,w=i;let m=.25*function(e){if(0===e.length)return 0;if(e.length>2){const a=(0,s.Wz)(1),t=parseFloat(e);switch(e.slice(-2)){case"px":return t;case"pt":return t*a;case"in":return 72*t*a;case"pc":return 12*t*a;case"mm":return 2.8346456692913384*t*a;case"cm":return 28.346456692913385*t*a}}return parseFloat(e)}((n?i:0).toString());c&&(m+=5),d.shape={type:"text",text:l,x:0,y:m,align:"middle",decoration:n&&n.decoration,rotated:a.rotated,kerning:a.kerning},d.font=n&&{size:i,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}if(!d.shape)return(0,n.d1)(new l.Z("symbolPreview: renderPreviewHTML2D","symbol not supported."));const M=(0,i._M)(e),b=M,g=e.color;let k=null;return b&&"pattern"===b.type&&g&&"picture-fill"!==e.type?k=(0,i.Od)(b.src,g.toCss(!0)).then((e=>(b.src=e,d.fill=b,d))):(d.fill=M,k=(0,n.DB)(d)),k.then((e=>{const t=[[e]];if("object"==typeof(null==a?void 0:a.symbolConfig)&&null!=a&&a.symbolConfig.applyColorModulation){const a=.6*y;t.unshift([{...e,offset:[-a,0],fill:(0,o.dc)(M,-.3)}]),t.push([{...e,offset:[a,0],fill:(0,o.dc)(M,.3)}]),y+=2*a}return(0,c.w)(t,[y,w],{node:a&&a.node,scale:v,opacity:m,rotation:h})}))}}}]);
//# sourceMappingURL=1278.js.map