{"version":3,"sources":["webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayObject.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/MeshData.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/WGLDisplayRecord.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/Metric.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/util/Reader.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/MeshData.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexBuffer.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/util/Writer.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/engine/webgl/util/serializationUtils.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/WGLFeatureView.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/SymbolTileRenderer.js"],"names":["r","s","this","insertAfter","id","displayRecords","metrics","set","map","clone","push","i","c","readInt32","o","d","n","length","vertexData","Map","vertexCount","indexData","clear","t","e","a","delete","geometryType","materialKey","minZoom","maxZoom","meshData","symbolLevel","zOrder","vertexFrom","indexFrom","indexCount","_sortKey","_computeSortKey","copy","stride","data","h","get","writeMeshDataToBuffers","range","boxes","size","directionX","directionY","offsetX","offsetY","placementPadding","anchor","baseZoom","x","y","bounds","extend","Math","floor","xBucket","yBucket","hasVV","xOverflow","yOverflow","min","ceil","width","height","findCollisionDelta","abs","_boxesToBoxes","_boxesToBox","_boxToBoxes","error","isNaN","_computeOffset","round","max","serialize","from","count","writeF32","f","l","readF32","u","b","m","p","g","setPlacementOffset","computeIndex","_pos","_buffer","_i32View","Int32Array","_f32View","Float32Array","vertexVectorsMap","_currentIndex","_currentRecordOffset","_currentMetricOffset","_currentMetrics","features","records","_bufDisplayObjects","Uint32Array","_bufDisplayRecords","_bufMetrics","_vertexBuffersMap","intoBuffers","incr","hasDisplayRecords","setValue","_rollbackDisplayObject","bufDisplayObjects","bufMetrics","bufRecords","transfer","buffer","vertexBuffersMap","destroy","decr","seek","indexBuffer","namedBuffers","decode","indexVector","namedVectors","fromVertexVector","_roundToNearest","BYTES_PER_ELEMENT","_array","ArrayBuffer","_ctor","byteLength","_ensureSize","slice","Array","deserialize","super","tiles","layer","layerView","tileInfoView","isUpdating","createTile","once","notifyChange","forEach","key","disposeTile","isReady","requestUpdate","prototype","_pointToCallbacks","_layer","_layerView","attributeView","update","hasAnimation","painter","effects","integrate","draw","renderChildren","requestRender","promise","minScale","maxScale","state","scale","doRender","hasLabels","featureReduction","type","labelsVisible","labelingInfo","registerRenderPass","name","brushes","target","children","drawPhase","enableDefaultDraw","hasEffects","apply","outsideEffect","enable","args","effectLists","excluded","insideEffect","included","hittest","highlight","hasHighlight","prepareRenderPasses","featuresView","addChild","removeChild","hitTest","indexOf","visualVariables","normalizationField","valueExpression","field","setRendererInfo","tileKey","onTileData","view","labelManager","onTileError","forceTextureUpload","lockTextureUpload","lockUploads","unlockTextureUpload","unlockUploads","getMaterialItems","isDirty","getTileBounds","addTile","removeTile"],"mappings":"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","file":"chunks/5121.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"./WGLDisplayRecord.js\";import{serializeList as i,deserializeList as t}from\"./util/serializationUtils.js\";import e from\"./collisions/Metric.js\";class r{constructor(s){this.insertAfter=null,this.id=s,this.displayRecords=[],this.metrics=[]}copy(){const s=new r(this.id);return s.set(this),s}clone(){const s=new r(this.id);return s.displayRecords=this.displayRecords.map((s=>s.clone())),s.metrics=this.metrics.map((s=>s.clone())),s.insertAfter=this.insertAfter,s}set(s){this.id=s.id,this.displayRecords=s.displayRecords,this.metrics=s.metrics,this.insertAfter=s.insertAfter}serialize(s){return s.push(this.id),i(s,this.metrics),i(s,this.displayRecords),s}static deserialize(i){const c=i.readInt32(),o=new r(c),d={id:c},n=t(i,e);return n.length&&(o.metrics=n),o.displayRecords=t(i,s,d),o}}export default r;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(){this.vertexData=new Map,this.vertexCount=0,this.indexData=[]}clear(){this.vertexData.clear(),this.vertexCount=0,this.indexData=[]}update(t,e,a){for(const e in t)this.vertexData.set(e,t[e]);for(const e in this.vertexData)null===t[e]&&this.vertexData.delete(e);this.vertexCount=e,this.indexData=a}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{strideToPackingFactor as t}from\"./Utils.js\";import e from\"./MeshData.js\";class s{constructor(t,e,s,r=0,i=0){this.id=t,this.geometryType=e,this.materialKey=s,this.minZoom=r,this.maxZoom=i,this.meshData=null,this.symbolLevel=0,this.zOrder=0,this.vertexFrom=0,this.vertexCount=0,this.indexFrom=0,this.indexCount=0}get sortKey(){return void 0===this._sortKey&&this._computeSortKey(),this._sortKey}clone(){return this.copy()}copy(){const t=new s(this.id,this.geometryType,this.materialKey);return t.vertexFrom=this.vertexFrom,t.vertexCount=this.vertexCount,t.indexFrom=this.indexFrom,t.indexCount=this.indexCount,t.zOrder=this.zOrder,t.symbolLevel=this.symbolLevel,t.meshData=this.meshData,t.minZoom=this.minZoom,t.maxZoom=this.maxZoom,t}setMeshDataFromBuffers(s,r,i){const o=new e;for(const e in r){const i=r[e].stride,a=r[e].data,h=[],n=t(i);for(let t=0;t<i*s.vertexCount/n;++t)h[t]=a[t+i*s.vertexFrom/n];o.vertexData.set(e,h)}o.indexData.length=0;for(let t=0;t<s.indexCount;++t)o.indexData[t]=i[t+s.indexFrom]-s.vertexFrom;o.vertexCount=s.vertexCount,this.meshData=o}readMeshDataFromBuffers(s,r){this.meshData?this.meshData.clear():this.meshData=new e;for(const e in s){const r=s[e].stride,i=s[e].data,o=[],a=t(r);for(let t=0;t<r*this.vertexCount/a;++t)o[t]=i[t+r*this.vertexFrom/a];this.meshData.vertexData.set(e,o)}this.meshData.indexData.length=0;for(let t=0;t<this.indexCount;++t)this.meshData.indexData[t]=r[t+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount}writeMeshDataToBuffers(e,s,r,i){for(const r in s){const i=s[r].stride,o=this.meshData.vertexData.get(r),a=s[r].data,h=t(i);for(let t=0;t<i*this.meshData.vertexCount/h;++t)a[t+i*e/h]=o[t]}for(let t=0;t<this.meshData.indexData.length;++t)i[t+r]=this.meshData.indexData[t]+e;this.vertexFrom=e,this.vertexCount=this.meshData.vertexCount,this.indexFrom=r,this.indexCount=this.meshData.indexData.length}static writeAllMeshDataToBuffers(t,e,s){let r=0,i=0;for(const o of t)o.writeMeshDataToBuffers(r,e,i,s),r+=o.vertexCount,i+=o.indexCount}_computeSortKey(){this._sortKey=(31&this.symbolLevel)<<12|(127&this.zOrder)<<4|7&this.geometryType}serialize(t){return t.push(this.geometryType),t.push(this.materialKey),t.push(this.vertexFrom),t.push(this.vertexCount),t.push(this.indexFrom),t.push(this.indexCount),t.push(this.minZoom),t.push(this.maxZoom),t}static deserialize(t,e){const r=t.readInt32(),i=t.readInt32(),o=new s(e.id,r,i);return o.vertexFrom=t.readInt32(),o.vertexCount=t.readInt32(),o.indexFrom=t.readInt32(),o.indexCount=t.readInt32(),o.minZoom=t.readInt32(),o.maxZoom=t.readInt32(),o}}export default s;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Logger.js\";import{COLLISION_BUCKET_SIZE as s,COLLISION_MAX_ZOOM_DELTA as i,TILE_SIZE as e}from\"../definitions.js\";import{f as o}from\"../../../../../chunks/vec2f32.js\";import h from\"./BoundingBox.js\";import{serializeList as n,deserializeList as r}from\"../util/serializationUtils.js\";const a=t.getLogger(\"esri/views/2d/engine/webgl/collisions/Metric\");class d{constructor(t,s,i,e,h){this.id=t,this.range=s,this.boxes=null,this.minZoom=-1,this.size=0,this.directionX=0,this.directionY=0,this.offsetX=0,this.offsetY=0,this.placementPadding=0,this.anchor=o(i,e),this.baseZoom=h}add(t,s,i){t.x=t.x+s,t.y=t.y+i,this.bounds?this.boxes?(this.boxes.push(t),this.bounds.extend(t)):(this.boxes=[this.bounds,t],this.bounds=this.bounds.clone(),this.bounds.extend(t)):this.bounds=t}computeIndex(){const t=this.anchor[0],i=this.anchor[1],o=Math.floor(t/s),h=Math.floor(i/s);this.xBucket=o,this.yBucket=h;const n=e/s;if(this.hasVV)return this.xOverflow=n,void(this.yOverflow=n);this.xOverflow=Math.min(n,Math.ceil(2*this.bounds.width/s)),this.yOverflow=Math.min(n,Math.ceil(2*this.bounds.height/s))}findCollisionDelta(t){const s=this.bounds.findCollisionDelta(t.bounds),e=this.boxes&&this.boxes.length,o=t.boxes&&t.boxes.length;return Math.abs(s)>i||!e&&!o?s:e&&o?this._boxesToBoxes(t):e?this._boxesToBox(t):this._boxToBoxes(t)}computeVVOffset(t,s){s||a.error(\"mapview-labeling\",`Unable to compute label offset. Expected an evaluator function but found ${s}`);let i=this.size;if(this.hasVV){const e=s(t);i=isNaN(e)||null==e||e===1/0?this.size:e}this._computeOffset(i)}setPlacementOffset(t,s,i,e,o){this.hasVV=t,this.size=s,this.placementPadding=Math.round(i),this.directionX=e,this.directionY=o}clone(){const t=new d(this.id,this.range,this.anchor[0],this.anchor[1],this.baseZoom);return t.minZoom=this.minZoom,this.bounds&&(t.bounds=this.bounds.clone()),this.boxes&&(t.boxes=this.boxes.map((t=>t.clone()))),t.xBucket=this.xBucket,t.yBucket=this.yBucket,t.xOverflow=this.xOverflow,t.yOverflow=this.yOverflow,t.hasVV=this.hasVV,t.size=this.size,t.directionX=this.directionX,t.directionY=this.directionY,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t}_boxToBoxes(t){let s=-1/0;for(const i of t.boxes){const t=this.bounds.findCollisionDelta(i);s=Math.max(t,s)}return s}_boxesToBox(t){let s=this.boxes[0].findCollisionDelta(t.bounds);for(let i=1;i<this.boxes.length;i++){const e=this.boxes[i].findCollisionDelta(t.bounds);s=Math.max(e,s)}return s}_boxesToBoxes(t){let s=-1/0;for(let i=0;i<this.boxes.length;i++){const e=this.boxes[i];for(const i of t.boxes){const t=e.findCollisionDelta(i);s=Math.max(t,s)}}return s}_computeOffset(t){this.offsetX=this.directionX*(t/2+this.placementPadding),this.offsetY=this.directionY*(t/2+this.placementPadding)}serialize(t){return t.push(this.id),this.bounds.serialize(t),t.push(this.range.from),t.push(this.range.count),t.push(this.anchor[0]),t.push(this.anchor[1]),t.push(this.baseZoom),t.push(this.hasVV?1:0),t.push(this.size),t.writeF32(this.directionX),t.writeF32(this.directionY),t.push(this.offsetX),t.push(this.offsetY),t.push(this.placementPadding),n(t,this.boxes),t}static deserialize(t){const s=t.readInt32(),i=h.deserialize(t),e={from:t.readInt32(),count:t.readInt32()},o=t.readInt32(),n=t.readInt32(),a=t.readInt32(),f=t.readInt32(),l=t.readInt32(),c=t.readF32(),u=t.readF32(),b=t.readInt32(),x=t.readInt32(),m=t.readInt32(),p=r(t,h),g=new d(s,e,o,n,a);return g.bounds=i,g.boxes=p,g.setPlacementOffset(!!f,l,m,c,u),g.offsetX=b,g.offsetY=x,g.computeIndex(),f||g._computeOffset(l),g}}export default d;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(t){this._pos=0,this._buffer=t,this._i32View=new Int32Array(this._buffer),this._f32View=new Float32Array(this._buffer)}readInt32(){return this._i32View[this._pos++]}readF32(){return this._f32View[this._pos++]}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport s from\"../WGLDisplayRecord.js\";import{serializeList as t,deserializeList as e}from\"../util/serializationUtils.js\";import r from\"../collisions/Metric.js\";import i from\"../WGLDisplayObject.js\";import c from\"../util/Reader.js\";import u from\"../util/Writer.js\";class f{constructor(s,t){this.vertexVectorsMap=s,this._currentIndex=-1,this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[];const e=4*(4*t.features+1),r=4*(8*t.records+1),i=4*(20*t.metrics+1);this._bufDisplayObjects=new u(Uint32Array,e+4),this._bufDisplayRecords=new u(Uint32Array,r+4),this._bufMetrics=new u(Uint32Array,i+4),this._bufDisplayObjects.push(0),this._bufDisplayRecords.push(0),this._bufMetrics.push(0)}get vertexBuffersMap(){if(!this._vertexBuffersMap){this._vertexBuffersMap={};for(let s=0;s<this.vertexVectorsMap.length;s++)this._vertexBuffersMap[s]=this.vertexVectorsMap[s].intoBuffers();this.vertexVectorsMap=null}return this._vertexBuffersMap}get(s){return this.vertexVectorsMap[s]}currentDisplayRecordCount(){return this._bufDisplayRecords[this._currentRecordOffset]}writeDisplayObject(s,t){this._bufDisplayObjects.incr(0),this._currentIndex=this._bufDisplayObjects.push(s),this._bufDisplayObjects.push(t),this._bufDisplayObjects.push(0),this._bufDisplayObjects.push(0),this._currentRecordOffset=0,this._currentMetricOffset=0,this._currentMetrics=[]}hasDisplayRecords(){return!(0===this._currentRecordOffset)}endDisplayObject(){this.hasDisplayRecords()?this._currentMetrics&&(0===this._currentMetricOffset&&(this._bufDisplayObjects.setValue(this._currentIndex+3,this._bufMetrics.length),this._currentMetricOffset=this._bufMetrics.length),t(this._bufMetrics,this._currentMetrics)):this._rollbackDisplayObject()}writeDisplayRecord(s,t,e,r,i,c,u=0,f=0){0===this._currentRecordOffset&&(this._currentRecordOffset=this._bufDisplayRecords.push(0),this._bufDisplayObjects.setValue(this._currentIndex+2,this._currentRecordOffset)),this._bufDisplayRecords.incr(this._currentRecordOffset),this._bufDisplayRecords.push(s),this._bufDisplayRecords.push(t),this._bufDisplayRecords.push(e),this._bufDisplayRecords.push(r),this._bufDisplayRecords.push(i),this._bufDisplayRecords.push(c),this._bufDisplayRecords.push(u),this._bufDisplayRecords.push(f)}writeMetrics(s){s&&this._currentMetrics.push(...s)}static deserializeDisplayObjects(t){const{bufDisplayObjects:u,bufMetrics:f,bufRecords:h}=t,p=new c(u),a=new c(h),l=new c(f),n=[];let b=p.readInt32();for(a.readInt32(),l.readInt32();b--;){const t=p.readInt32(),c=p.readInt32(),u=p.readInt32(),f=p.readInt32(),h=new i(t);0!==c&&(h.insertAfter=c),0!==u&&(h.displayRecords=e(a,s,{id:t})),0!==f&&(h.metrics=e(l,r)),n.push(h)}return n}encode(s,t){const e={};for(let s=0;s<this.vertexVectorsMap.length;s++){const r=this.vertexVectorsMap[s];e[s]={},r.transfer(e[s],t)}s.bufDisplayObjects=this._bufDisplayObjects.buffer(),s.bufRecords=this._bufDisplayRecords.buffer(),s.bufMetrics=this._bufMetrics.buffer(),t.push(s.bufDisplayObjects),t.push(s.bufMetrics),t.push(s.bufRecords),s.vertexBuffersMap=e,this.destroy()}destroy(){this.vertexVectorsMap=null,this._bufDisplayObjects=null,this._bufDisplayRecords=null,this._bufMetrics=null}_rollbackDisplayObject(){this._bufDisplayObjects.decr(0),this._bufDisplayObjects.seek(this._bufDisplayObjects.length-4),this._currentIndex=this._bufDisplayObjects.length}}export{f as MeshData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{allocateTypedArrayBufferwithData as e}from\"../Utils.js\";class t{constructor(e,t,r){this.data=e,this.stride=t,this.vertexCount=r}static decode(r){const s=e(r.data,r.stride),o=r.stride,n=r.vertexCount;return new t(s,o,n)}static fromVertexVector(r){const s=e(r.data.buffer(),r.stride),o=r.stride,n=r.vertexCount;return new t(s,o,n)}}class r{constructor(e,t,r){this.geometryType=e,this.indexBuffer=new Uint32Array(t),this.namedBuffers=r}static decode(e){const s=e.geometryType,o=e.indexBuffer,n={};for(const r in e.namedBuffers)n[r]=t.decode(e.namedBuffers[r]);return new r(s,o,n)}static fromVertexVectors(e){const s=e.geometryType,o=e.indexVector.buffer(),n={};for(const r in e.namedVectors)n[r]=t.fromVertexVector(e.namedVectors[r]);return new r(s,o,n)}}export default t;export{r as VertexBuffers};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nexport default class{constructor(t,s){this._pos=0;const r=s?this._roundToNearest(s,t.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(r),this._buffer=new t(this._array),this._ctor=t}get length(){return this._pos}_roundToNearest(t,s){const r=Math.round(t);return r+(s-r%s)}_ensureSize(t){if(this._pos+t>=this._buffer.length){const s=this._roundToNearest(1.5*(this._array.byteLength+t*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT),r=new ArrayBuffer(s),e=new this._ctor(r);e.set(this._buffer,0),this._array=r,this._buffer=e}}writeF32(t){this._ensureSize(1);const s=this._pos;return new Float32Array(this._array,4*this._pos,1)[0]=t,this._pos++,s}push(t){this._ensureSize(1);const s=this._pos;return this._buffer[this._pos++]=t,s}writeFixed(t){this._buffer[this._pos++]=t}setValue(t,s){this._buffer[t]=s}getValue(t){return this._buffer[t]}incr(t){this._buffer[t]++}decr(t){this._buffer[t]--}writeRegion(t){this._ensureSize(t.length);const s=this._pos;return this._buffer.set(t,this._pos),this._pos+=t.length,s}buffer(){const t=this._array.slice(0,4*this._pos);return this.destroy(),t}toArray(){const t=this._array,s=[];for(let r=0;r<t.byteLength/4;r++)s.push(t[r]);return s}seek(t){this._pos=t}destroy(){this._array=null,this._buffer=null}}\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nfunction e(e,n){if(null!==n){e.push(n.length);for(const r of n)r.serialize(e);return e}e.push(0)}function n(e,n,r){const t=e.readInt32(),o=new Array(t);for(let t=0;t<o.length;t++)o[t]=n.deserialize(e,r);return o}export{n as deserializeList,e as serializeList};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{HandleOwner as s}from\"../../../../../core/HandleOwner.js\";let i=class extends s{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once(\"isReady\",(()=>this.notifyChange(\"updating\"))),this.tiles.set(e.id,t),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.disposeTile(e)}isUpdating(){let e=!0;return this.tiles.forEach((t=>{e=e&&t.isReady})),!e}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};e([t()],i.prototype,\"layer\",void 0),e([t()],i.prototype,\"layerView\",void 0),e([t()],i.prototype,\"tileInfoView\",void 0),e([t()],i.prototype,\"updating\",null),i=e([r(\"esri.views.2d.layers.features.tileRenderers.BaseTileRenderer\")],i);var o=i;export default o;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{createResolver as e}from\"../../../../../../core/promiseUtils.js\";import{WGLDrawPhase as s}from\"../../../../engine/webgl/enums.js\";import{brushes as t}from\"../../../../engine/brushes.js\";import{FeatureContainer as i}from\"../../../../engine/FeatureContainer.js\";class a extends i{constructor(e,s,t){super(e),this._pointToCallbacks=new Map,this._layer=t,this._layerView=s}renderChildren(e){if(this.attributeView.update(),this.hasAnimation){e.painter.effects.integrate.draw(e,e.attributeView)}super.renderChildren(e)}hitTest(s,t){const i=[s,t],a=e();return this._pointToCallbacks.set(i,a),this.requestRender(),a.promise}doRender(e){const{minScale:s,maxScale:t}=this._layer,i=e.state.scale;i<=(s||1/0)&&i>=t&&super.doRender(e)}get hasAnimation(){return this.hasLabels}get hasLabels(){const e=this._layer.featureReduction,s=e&&\"cluster\"===e.type&&e.labelsVisible&&e.labelingInfo&&e.labelingInfo.length;return this._layer.labelingInfo&&this._layer.labelingInfo.length&&this._layer.labelsVisible||!!s}get labelsVisible(){return this._layer.labelsVisible}prepareRenderPasses(e){const i=e.registerRenderPass({name:\"label\",brushes:[t.label],target:()=>this.hasLabels?this.children:null,drawPhase:s.LABEL|s.LABEL_ALPHA}),a=e.registerRenderPass({name:\"geometry\",brushes:[t.fill,t.line,t.marker,t.text],target:()=>this.children,enableDefaultDraw:()=>!this._layerView.hasEffects,effects:[{apply:e.effects.outsideEffect,enable:()=>this._layerView.hasEffects,args:()=>this._layerView.effectLists.excluded},{apply:e.effects.insideEffect,enable:()=>this._layerView.hasEffects,args:()=>this._layerView.effectLists.included},{apply:e.effects.hittest,enable:()=>!!this._pointToCallbacks.size,args:()=>this._pointToCallbacks}]}),r=e.registerRenderPass({name:\"highlight\",brushes:[t.fill,t.line,t.marker,t.text],target:()=>this.children,drawPhase:s.HIGHLIGHT,enableDefaultDraw:()=>!1,effects:[{apply:e.effects.highlight,enable:()=>!!this._layerView.hasHighlight()}]});return[...super.prepareRenderPasses(e),a,r,i]}}export{a as WGLFeatureView};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{create as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import{WGLTile as s}from\"../../../engine/webgl/WGLTile.js\";import{simplifyVVRenderer as r}from\"../support/rendererUtils.js\";import{convertVisualVariables as a}from\"./support/visualVariablesUtils.js\";import l from\"./BaseTileRenderer.js\";import{WGLFeatureView as o}from\"./support/WGLFeatureView.js\";let n=class extends l{install(e){const t=new o(this.tileInfoView,this.layerView,this.layer);this.featuresView=t,e.addChild(t)}uninstall(e){e.removeChild(this.featuresView),this.featuresView.destroy()}hitTest(e,t){return this.featuresView.hitTest(e,t)}supportsRenderer(e){return null!=e&&-1!==[\"simple\",\"class-breaks\",\"unique-value\",\"dot-density\",\"dictionary\"].indexOf(e.type)}onConfigUpdate(e){let t=null;if(\"visualVariables\"in e){const i=(r(e).visualVariables||[]).map((e=>{const t=e.clone();return\"normalizationField\"in e&&(t.normalizationField=null),e.valueExpression&&\"$view.scale\"!==e.valueExpression&&(t.valueExpression=null,t.field=\"nop\"),t}));t=a(i)}this.featuresView.setRendererInfo(e,t,this.layerView.effects)}onTileData(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileData(t,e.data),this.layerView.view.labelManager.requestUpdate()}onTileError(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileError(t)}forceAttributeTextureUpload(){this.featuresView.attributeView.forceTextureUpload()}lockGPUUploads(){this.featuresView.attributeView.lockTextureUpload(),this.tiles.forEach((e=>e.lockUploads()))}unlockGPUUploads(){this.featuresView.attributeView.unlockTextureUpload(),this.tiles.forEach((e=>e.unlockUploads()))}async getMaterialItems(e){return this.featuresView.getMaterialItems(e)}invalidateLabels(){this.featuresView.hasLabels&&(this.tiles.forEach((e=>e.isDirty=!0)),this.layerView.view.labelManager.requestUpdate())}createTile(e){const t=this.tileInfoView.getTileBounds(i(),e),r=new s(e,t);return this.featuresView.hasLabels&&this.layerView.view.labelManager.addTile(this.layerView,r),r}disposeTile(e){this.featuresView.removeChild(e),this.featuresView.hasLabels&&this.layerView.view.labelManager.removeTile(this.layerView,e.key.id),e.destroy(),this.layerView.view.labelManager.requestUpdate()}};n=e([t(\"esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer\")],n);var u=n;export default u;\n"],"sourceRoot":""}