{"version":3,"sources":["webpack://inspection-scheduler/./node_modules/@arcgis/core/layers/support/SceneModification.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/layers/support/SceneModifications.js","webpack://inspection-scheduler/./node_modules/@arcgis/core/layers/IntegratedMeshLayer.js"],"names":["l","y","e","super","this","geometry","type","r","o","s","layer","spatialReference","equals","messages","push","modification","context","p","toJSON","prototype","nonNullable","m","n","url","toArray","map","filter","items","clone","t","add","_readModifications","i","origin","c","responseType","signal","u","data","String","x","handles","geometryType","operationalLayerType","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","serviceUpdateTimeStamp","profile","modifications","_modificationsSource","elevationInfo","path","destroy","addResolvingPromise","_doLoad","loadFromPortal","supportedTypes","_fetchService","setAtOrigin","_verifyRootNodeAndUpdateExtent","load","then","_debouncedSaveOperations","getTypeKeywords","_getTypeKeywords","portalItemLayerType","layerType","isNaN","version","major","minor","serviceVersion","versionString","supportedVersions","readOnly","json","read","origins","prefix","write"],"mappings":"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","file":"chunks/9640.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{clone as r}from\"../../core/lang.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import t from\"../../core/Warning.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{writer as p}from\"../../core/accessorSupport/decorators/writer.js\";import{persistable as i}from\"../../core/accessorSupport/decorators/persistable.js\";import{JSONSupport as a}from\"../../core/JSONSupport.js\";import c from\"../../geometry/Polygon.js\";import\"../../geometry.js\";import{canProjectWithoutEngine as m,projectPolygon as n}from\"../../geometry/projection.js\";var l;let y=l=class extends a{constructor(e){super(e),this.geometry=null,this.type=\"clip\"}writeGeometry(e,r,o,s){if(s.layer&&s.layer.spatialReference&&!s.layer.spatialReference.equals(this.geometry.spatialReference)){if(!m(e.spatialReference,s.layer.spatialReference))return void(s&&s.messages&&s.messages.push(new t(\"scenemodification:unsupported\",\"Scene modifications with incompatible spatial references are not supported\",{modification:this,spatialReference:s.layer.spatialReference,context:s})));const p=new c;n(e,p,s.layer.spatialReference),r[o]=p.toJSON(s)}else r[o]=e.toJSON(s);delete r[o].spatialReference}clone(){return new l({geometry:r(this.geometry),type:this.type})}};e([o({type:c}),i()],y.prototype,\"geometry\",void 0),e([p([\"web-scene\",\"portal-item\"],\"geometry\")],y.prototype,\"writeGeometry\",null),e([o({type:[\"clip\",\"mask\",\"replace\"],nonNullable:!0}),i()],y.prototype,\"type\",void 0),y=l=e([s(\"esri.layers.support.SceneModification\")],y);var f=y;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{get as o}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import{urlToObject as s}from\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import{JSONSupportMixin as i}from\"../../core/JSONSupport.js\";import c from\"../../core/Collection.js\";import p from\"../../request.js\";import a from\"./SceneModification.js\";var m;let n=m=class extends(i(c.ofType(a))){constructor(r){super(r),this.url=null}toJSON(r){return this.toArray().map((o=>o.toJSON(r))).filter((r=>!!r.geometry))}clone(){return new m({url:this.url,items:this.items.map((r=>r.clone()))})}_readModifications(r,o){for(const t of r)this.add(a.fromJSON(t,o))}static fromJSON(r,o){const t=new m;return t._readModifications(r,o),t}static async fromUrl(r,t,e){const i={url:s(r),origin:\"service\"},c=await p(r,{responseType:\"json\",signal:o(e,\"signal\")}),n=t.toJSON(),u=[];for(const r of c.data)u.push(a.fromJSON({...r,geometry:{...r.geometry,spatialReference:n}},i));return new m({url:r,items:u})}};r([t({type:String})],n.prototype,\"url\",void 0),n=m=r([e(\"esri.layers.support.SceneModifications\")],n);var u=n;export default u;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.18/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import{get as t,isSome as o,isNone as r}from\"../core/maybe.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as i}from\"../core/accessorSupport/decorators/property.js\";import{reader as s}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"../core/Error.js\";import{f as p}from\"../chunks/persistableUrlUtils.js\";import{persistable as d}from\"../core/accessorSupport/decorators/persistable.js\";import y from\"../core/Handles.js\";import c from\"./Layer.js\";import{MultiOriginJSONMixin as m}from\"../core/MultiOriginJSONSupport.js\";import{on as l}from\"../core/watchUtils.js\";import{elevationInfo as h}from\"./support/commonProperties.js\";import{OperationalLayer as f}from\"./mixins/OperationalLayer.js\";import{ArcGISService as u}from\"./mixins/ArcGISService.js\";import{PortalLayer as v}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as g}from\"./mixins/ScaleRangeLayer.js\";import{I3SNodePageDefinition as S,I3SMaterialDefinition as j,I3STextureSetDefinition as w,I3SGeometryDefinition as T}from\"./support/I3SLayerDefinitions.js\";import{SceneService as L}from\"./mixins/SceneService.js\";import _ from\"./support/SceneModifications.js\";let x=class extends(L(u(f(v(g(m(c))))))){constructor(...e){super(...e),this.handles=new y,this.geometryType=\"mesh\",this.operationalLayerType=\"IntegratedMeshLayer\",this.type=\"integrated-mesh\",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.profile=\"mesh-pyramids\",this.modifications=null,this._modificationsSource=null,this.elevationInfo=null,this.path=null}destroy(){this.handles.destroy()}initialize(){this.handles.add(l(this,\"modifications\",\"after-changes\",(()=>this.modifications=this.modifications),null,null,!0))}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}readModifications(e,t,o){this._modificationsSource={url:p(e,o),context:o}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const r=t(e,\"signal\");try{await this.loadFromPortal({supportedTypes:[\"Scene Service\"]},e)}catch(e){}if(await this._fetchService(r),o(this._modificationsSource)){const t=await _.fromUrl(this._modificationsSource.url,this.spatialReference,e);this.setAtOrigin(\"modifications\",t,this._modificationsSource.context.origin),this._modificationsSource=null}await this._verifyRootNodeAndUpdateExtent(this.nodePages,r)}beforeSave(){if(!r(this._modificationsSource))return this.load().then((()=>{}),(()=>{}))}async saveAs(e,t){return this._debouncedSaveOperations(1,{...t,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"integrated-mesh\"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:\"integrated-mesh\"};return this._debouncedSaveOperations(0,e)}validateLayer(e){if(e.layerType&&\"IntegratedMesh\"!==e.layerType)throw new n(\"integrated-mesh-layer:layer-type-not-supported\",\"IntegratedMeshLayer does not support this layer type\",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new n(\"layer:service-version-not-supported\",\"Service version is not supported.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"});if(this.version.major>1)throw new n(\"layer:service-version-too-new\",\"Service version is too new.\",{serviceVersion:this.version.versionString,supportedVersions:\"1.x\"})}_getTypeKeywords(){return[\"IntegratedMeshLayer\"]}};e([i({type:String,readOnly:!0})],x.prototype,\"geometryType\",void 0),e([i({type:[\"show\",\"hide\"]})],x.prototype,\"listMode\",void 0),e([i({type:[\"IntegratedMeshLayer\"]})],x.prototype,\"operationalLayerType\",void 0),e([i({json:{read:!1},readOnly:!0})],x.prototype,\"type\",void 0),e([i({type:S,readOnly:!0})],x.prototype,\"nodePages\",void 0),e([i({type:[j],readOnly:!0})],x.prototype,\"materialDefinitions\",void 0),e([i({type:[w],readOnly:!0})],x.prototype,\"textureSetDefinitions\",void 0),e([i({type:[T],readOnly:!0})],x.prototype,\"geometryDefinitions\",void 0),e([i({readOnly:!0})],x.prototype,\"serviceUpdateTimeStamp\",void 0),e([i({type:_}),d({origins:[\"web-scene\",\"portal-item\"],type:\"resource\",prefix:\"modifications\"})],x.prototype,\"modifications\",void 0),e([s([\"web-scene\",\"portal-item\"],\"modifications\")],x.prototype,\"readModifications\",null),e([i(h)],x.prototype,\"elevationInfo\",void 0),e([i({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0},\"portal-item\":{read:!0,write:!0}},read:!1}})],x.prototype,\"path\",void 0),x=e([a(\"esri.layers.IntegratedMeshLayer\")],x);var O=x;export default O;\n"],"sourceRoot":""}