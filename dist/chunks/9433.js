(self.webpackChunkinspection_scheduler=self.webpackChunkinspection_scheduler||[]).push([[9433],{39433:(t,e,n)=>{"use strict";n.r(e),n.d(e,{work:()=>j,wrappedWork:()=>R});var o=n(33655);function r(t,e,n){const r=t.byteLength/(4*e),l=new Uint32Array(t,0,r*e);let f=new Uint32Array(r);const u=n&&n.minReduction||0,g=n&&n.originalIndices||null,d=n&&n.componentOffsets||null;let p=0;if(d)for(let t=0;t<d.length-1;t++){const e=d[t+1]-d[t];e>p&&(p=e)}else p=r;const h=Math.floor(1.1*p)+1;(null==a||a.length<2*h)&&(a=new Uint32Array((0,o.Sf)(2*h)));for(let t=0;t<2*h;t++)a[t]=0;let m=0;const w=!!d&&!!g,v=w?g.length:r,y=w?new Uint32Array(g.length):null,A=1.96;let I=0!==u?Math.ceil(4*A*A/(u*u)*u*(1-u)):v,b=1,N=d?d[1]:v;for(let t=0;t<v;t++){if(t===I){const e=1-m/t;if(e+A*Math.sqrt(e*(1-e)/t)<u)return null;I*=2}if(t===N){for(let t=0;t<2*h;t++)a[t]=0;if(g)for(let t=d[b-1];t<d[b];t++)y[t]=f[g[t]];N=d[++b]}const n=w?g[t]:t,o=n*e,r=c(l,o,e);let s=r%h,p=m;for(;0!==a[2*s+1];){if(a[2*s]===r){const t=a[2*s+1]-1;if(i(l,o,t*e,e)){p=f[t];break}}s++,s>=h&&(s-=h)}p===m&&(a[2*s]=r,a[2*s+1]=n+1,m++),f[n]=p}if(0!==u&&1-m/r<u)return null;if(w){for(let t=d[b-1];t<y.length;t++)y[t]=f[g[t]];f=y}const S=new Uint32Array(e*m);m=0;for(let t=0;t<v;t++)f[t]===m&&(s(l,(w?g[t]:t)*e,S,m*e,e),m++);if(g&&!w){const t=new Uint32Array(g.length);for(let e=0;e<t.length;e++)t[e]=f[g[e]];f=t}return{buffer:S.buffer,indices:f,uniqueCount:m}}function i(t,e,n,o){for(let r=0;r<o;r++)if(t[e+r]!==t[n+r])return!1;return!0}function s(t,e,n,o,r){for(let i=0;i<r;i++)n[o+i]=t[e+i]}function c(t,e,n){let o=0;for(let r=0;r<n;r++)o=t[e+r]+o|0,o=o+(o<<11)+(o>>>2)|0;return o>>>0}let a=null;const l={divisor:0};function f(t,e={}){e={...l,...e};const n=t.stride;return t.fieldNames.filter((e=>{const n=t.fields.get(e).optional;return!(n&&n.glPadding)})).map((o=>{const r=t.fields.get(o),i=r.constructor.ElementCount,s=function(t){const e=u[t];if(e)return e;throw new Error("BufferType not supported in WebGL")}(r.constructor.ElementType),c=r.offset,a=!(!r.optional||!r.optional.glNormalized);return{name:o,stride:n,count:i,type:s,offset:c,normalized:a,divisor:e.divisor}}))}const u={u8:5121,u16:5123,u32:5125,i8:5120,i16:5122,i32:5124,f32:5126};var g=n(80905);const d=(0,g.U$)().vec3f("position").u16("componentIndex").u16("_padding"),p=(f((0,g.U$)().vec2u8("sideness")),(0,g.U$)().vec3f("position0").vec3f("position1").u16("componentIndex").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",{glPadding:!0}).u16("_padding2",{glPadding:!0})),h=p.clone().vec3f("normal"),m=p.clone().vec3f("normalA").vec3f("normalB");var w=n(91946),v=n(77625),y=n(17387);class A{updateSettings(t){this.settings=t}write(t,e,n){const o=function(t){const e=I;e[0]=t.position0[0],e[1]=t.position0[1],e[2]=t.position0[2],e[3]=t.position1[0],e[4]=t.position1[1],e[5]=t.position1[2],N[0]=5381;for(let t=0;t<b.length;t++)N[0]=31*N[0]+b[t];return N[0]}(n);S.seed=o;const r=S.getIntRange(0,255),i=S.getIntRange(0,this.settings.variants-1),s=S.getFloat(),c=255*(.5*function(t,e){const n=t<0?-1:1;return Math.pow(Math.abs(t),1.2)*n}(-(1-Math.min(s/.7,1))+Math.max(0,s-.7)/(1-.7))+.5);t.position0.setVec(e,n.position0),t.position1.setVec(e,n.position1),t.componentIndex.set(e,n.componentIndex),t.variantOffset.set(e,r),t.variantStroke.set(e,i),t.variantExtension.set(e,c)}trim(t,e){return t.slice(0,e)}}const I=new Float32Array(6),b=new Uint32Array(I.buffer),N=new Uint32Array(1),S=new w.Z;class U{constructor(){this.commonWriter=new A}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return h.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),(0,y.b)(E,n.faceNormal0,n.faceNormal1),(0,y.n)(E,E),t.normal.setVec(e,E)}trim(t,e){return this.commonWriter.trim(t,e)}}U.Layout=h,U.glLayout=f(h,{divisor:1});class V{constructor(){this.commonWriter=new A}updateSettings(t){this.commonWriter.updateSettings(t)}allocate(t){return m.createBuffer(t)}write(t,e,n){this.commonWriter.write(t,e,n),t.normalA.setVec(e,n.faceNormal0),t.normalB.setVec(e,n.faceNormal1)}trim(t,e){return this.commonWriter.trim(t,e)}}V.Layout=m,V.glLayout=f(m,{divisor:1});const E=(0,v.c)();var k=n(12608);function x(t,e){return e.push(t.buffer),{buffer:t.buffer,layout:D(t.layout)}}function D(t){const e=new Array;return t.fields.forEach(((t,n)=>{const o={...t,constructor:M(t.constructor)};e.push([n,o])})),{stride:t.stride,fields:e,fieldNames:t.fieldNames}}const L=[k.ly,k.Eu,k.ct,k.ek,k.gK,k.bj,k.oS,k.q6,k.fP,k.Cd,k.ey,k.O1,k.D_,k.xA,k.ne,k.mc,k.av,k.TS,k.mw,k.v6,k.Nu,k.qt,k.G5,k.hu,k.Hz,k.Vs,k.P_,k.ir,k.o7,k.or,k.n1,k.zO,k.Jj,k.wA,k.PP,k.TN];function M(t){return`${t.ElementType}_${t.ElementCount}`}const W=new Map;function B(t,e){const n=t.length/3,o=new Uint32Array(e+1),r=new Uint32Array(e+1),i=(t,e)=>{t<e?o[t+1]++:r[e+1]++};for(let e=0;e<n;e++){const n=t[3*e],o=t[3*e+1],r=t[3*e+2];i(n,o),i(o,r),i(r,n)}let s=0,c=0;for(let t=0;t<e;t++){const e=o[t+1],n=r[t+1];o[t+1]=s,r[t+1]=c,s+=e,c+=n}const a=new Uint32Array(6*n),l=o[e],f=(t,e,n)=>{if(t<e){const r=o[t+1]++;a[2*r]=e,a[2*r+1]=n}else{const o=r[e+1]++;a[2*l+2*o]=t,a[2*l+2*o+1]=n}};for(let e=0;e<n;e++){const n=t[3*e],o=t[3*e+1],r=t[3*e+2];f(n,o,e),f(o,r,e),f(r,n,e)}const u=(t,e)=>{const n=2*t,o=e-t;for(let t=1;t<o;t++){const e=a[n+2*t],o=a[n+2*t+1];let r=t-1;for(;r>=0&&a[n+2*r]>e;r--)a[n+2*r+2]=a[n+2*r],a[n+2*r+3]=a[n+2*r+1];a[n+2*r+2]=e,a[n+2*r+3]=o}};for(let t=0;t<e;t++)u(o[t],o[t+1]),u(l+r[t],l+r[t+1]);const g=new Int32Array(3*n),d=(e,n)=>e===t[3*n]?0:e===t[3*n+1]?1:e===t[3*n+2]?2:-1,p=(t,e)=>{const n=d(t,e);g[3*e+n]=-1},h=(t,e,n,o)=>{const r=d(t,e);g[3*e+r]=o;const i=d(n,o);g[3*o+i]=e};for(let t=0;t<e;t++){let e=o[t];const n=o[t+1];let i=r[t];const s=r[t+1];for(;e<n&&i<s;){const n=a[2*e],o=a[2*l+2*i];n===o?(h(t,a[2*e+1],o,a[2*l+2*i+1]),e++,i++):n<o?(p(t,a[2*e+1]),e++):(p(o,a[2*l+2*i+1]),i++)}for(;e<n;)p(t,a[2*e+1]),e++;for(;i<s;)p(a[2*l+2*i],a[2*l+2*i+1]),i++}return g}L.forEach((t=>W.set(M(t),t)));var P=n(6962),_=n(19677),C=n(17154);function F(t,e){return t.cosAngle<e}function T(t,e){return t.cosAngle>e}function z(t,e){const n=(0,o.ZF)(t.cosAngle),r=q.fwd,i=q.ortho;return(0,C.tB)(r,t.position1,t.position0),n*((0,y.d)((0,y.c)(i,t.faceNormal0,t.faceNormal1),r)>0?-1:1)>e}const q={edge:{position0:(0,v.c)(),position1:(0,v.c)(),faceNormal0:(0,v.c)(),faceNormal1:(0,v.c)(),componentIndex:0,cosAngle:0},ortho:(0,v.c)(),fwd:(0,v.c)()},O={v0:(0,v.c)(),v1:(0,v.c)(),v2:(0,v.c)()},$={anglePlanar:4,angleSignificantEdge:35};async function R(t){const e=function(t){return{data:d.createView(t.dataBuffer),originalIndices:"Uint32Array"===t.originalIndicesType?new Uint32Array(t.originalIndicesBuffer):"Uint16Array"===t.originalIndicesType?new Uint16Array(t.originalIndicesBuffer):void 0,writerSettings:t.writerSettings,skipDeduplicate:t.skipDeduplicate}}(t),n=j(e),o=[e.data.buffer];return{result:function(t,e){return e.push(t.regular.lodInfo.lengths.buffer),e.push(t.silhouette.lodInfo.lengths.buffer),{regular:{instancesData:x(t.regular.instancesData,e),lodInfo:{lengths:t.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:x(t.silhouette.instancesData,e),lodInfo:{lengths:t.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:t.averageEdgeLength}}(n,o),transferList:o}}function j(t){const e=function(t,e,n){if(e&&n)return{faces:n,neighbors:B(n,t.count),vertices:t};{const e=r(t.buffer,t.stride/4,{originalIndices:n}),o=B(e.indices,e.uniqueCount);return{faces:e.indices,neighbors:o,vertices:d.createView(e.buffer)}}}(t.data,t.skipDeduplicate,t.originalIndices);return G.updateSettings(t.writerSettings),Z.updateSettings(t.writerSettings),function(t,e,n,r=$){const i=t.vertices.position,s=t.vertices.componentIndex,c=(0,o.Vl)(r.anglePlanar),a=(0,o.Vl)(r.angleSignificantEdge),l=Math.cos(a),f=Math.cos(c),u=q.edge,g=u.position0,d=u.position1,p=u.faceNormal0,h=u.faceNormal1,m=function(t){const e=t.faces.length/3,n=t.vertices.position,o=t.faces,r=O.v0,i=O.v1,s=O.v2,c=new Float32Array(3*e);for(let t=0;t<e;t++){const e=o[3*t+0],a=o[3*t+1],l=o[3*t+2];n.getVec(e,r),n.getVec(a,i),n.getVec(l,s),(0,y.f)(i,i,r),(0,y.f)(s,s,r),(0,y.c)(r,i,s),(0,y.n)(r,r),c[3*t+0]=r[0],c[3*t+1]=r[1],c[3*t+2]=r[2]}return c}(t),w=function(t){const e=t.faces.length/3,n=t.faces,o=t.neighbors;let r=0;for(let t=0;t<e;t++){const e=o[3*t+0],i=o[3*t+1],s=o[3*t+2],c=n[3*t+0],a=n[3*t+1],l=n[3*t+2];r+=-1===e||c<a?1:0,r+=-1===i||a<l?1:0,r+=-1===s||l<c?1:0}const i=new Int32Array(4*r);let s=0;for(let t=0;t<e;t++){const e=o[3*t+0],r=o[3*t+1],c=o[3*t+2],a=n[3*t+0],l=n[3*t+1],f=n[3*t+2];(-1===e||a<l)&&(i[s++]=a,i[s++]=l,i[s++]=t,i[s++]=e),(-1===r||l<f)&&(i[s++]=l,i[s++]=f,i[s++]=t,i[s++]=r),(-1===c||f<a)&&(i[s++]=f,i[s++]=a,i[s++]=t,i[s++]=c)}return i}(t),v=w.length/4,A=e.allocate(v);let I=0;const b=v,N=n.allocate(b);let S=0,U=0,V=0;const E=(0,_.w6)(0,v),k=new Float32Array(v);(0,P.Ed)(k,((t,e,n)=>{i.getVec(w[4*e+0],g),i.getVec(w[4*e+1],d),n[e]=(0,y.k)(g,d)})),E.sort(((t,e)=>k[e]-k[t]));const x=new Array,D=new Array;for(let t=0;t<v;t++){const o=E[t],r=k[o],a=w[4*o+0],v=w[4*o+1],b=w[4*o+2],L=w[4*o+3],M=-1===L;if(i.getVec(a,g),i.getVec(v,d),M)(0,y.s)(p,m[3*b+0],m[3*b+1],m[3*b+2]),(0,y.g)(h,p),u.componentIndex=s.get(a),u.cosAngle=(0,y.d)(p,h);else{if((0,y.s)(p,m[3*b+0],m[3*b+1],m[3*b+2]),(0,y.s)(h,m[3*L+0],m[3*L+1],m[3*L+2]),u.componentIndex=s.get(a),u.cosAngle=(0,y.d)(p,h),T(u,f))continue;u.cosAngle<-.9999&&(0,y.g)(h,p)}U+=r,V++,M||F(u,l)?(e.write(A,I++,u),x.push(r)):z(u,c)&&(n.write(N,S++,u),D.push(r))}const L=new Float32Array(x.reverse()),M=new Float32Array(D.reverse());return{regular:{instancesData:e.trim(A,I),lodInfo:{lengths:L}},silhouette:{instancesData:n.trim(N,S),lodInfo:{lengths:M}},averageEdgeLength:U/V}}(e,G,Z)}const G=new U,Z=new V}}]);
//# sourceMappingURL=9433.js.map